<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PBRTO a micro optimized raytracing app | Harlinn</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="PBRTO a micro optimized raytracing app" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is my personal site." />
<meta property="og:description" content="This is my personal site." />
<link rel="canonical" href="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:url" content="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:site_name" content="Harlinn" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PBRTO a micro optimized raytracing app" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"This is my personal site.","headline":"PBRTO a micro optimized raytracing app","url":"https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://harlinn.github.io/feed.xml" title="Harlinn" /><script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="importmap">
        {
            "imports":
            {
            "three": "https://cdn.jsdelivr.net/npm/three@0.171.0/build/three.module.min.js" ,
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.171.0/examples/jsm/"
            }
        }
    </script>
</head>
<body><header class="site-header" role="banner">
    <div id="animatedHeader" height="120px" width="100%">
        <script type="x-shader/x-vertex" id="vertexshader">
            attribute float scale;
            void main() {
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                gl_PointSize = scale * ( 100.0 / - mvPosition.z );
                gl_Position = projectionMatrix * mvPosition;
            }

        </script>

        <script type="x-shader/x-fragment" id="fragmentshader">
            uniform vec3 color;
            void main() {
                if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )  discard;
                gl_FragColor = vec4( color, 0.8 );
            }
        </script>

        <script type="module">

			import * as THREE from 'three';

			const SEPARATION = 100, AMOUNTX = 50, AMOUNTY = 50;

			let container; 
			let camera, scene, renderer;

			let particles, count = 0;

			let mouseX = 0, mouseY = 0;

			let animatedHeaderHeight = 120;

            let windowHalfX = window.innerWidth / 2;
            let windowHalfY = animatedHeaderHeight/2.0;

			init();

			function init() {

                container = document.querySelector('#animatedHeader');

                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000 );
				camera.position.z = 1000;

				scene = new THREE.Scene();

				//

				const numParticles = AMOUNTX * AMOUNTY;

				const positions = new Float32Array( numParticles * 3 );
				const scales = new Float32Array( numParticles );

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i ] = ix * SEPARATION - ( ( AMOUNTX * SEPARATION ) / 2 ); // x
						positions[ i + 1 ] = 0; // y
						positions[ i + 2 ] = iy * SEPARATION - ( ( AMOUNTY * SEPARATION ) / 2 ); // z

						scales[ j ] = 1;

						i += 3;
						j ++;

					}

				}

				const geometry = new THREE.BufferGeometry();
				geometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
				geometry.setAttribute( 'scale', new THREE.BufferAttribute( scales, 1 ) );

				const material = new THREE.ShaderMaterial( {

					uniforms: {
						color: { value: new THREE.Color( 0xffffff ) },
					},
					vertexShader: document.getElementById( 'vertexshader' ).textContent,
					fragmentShader: document.getElementById( 'fragmentshader' ).textContent

				} );

				//

				particles = new THREE.Points( geometry, material );
				scene.add( particles );

				//

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize(window.innerWidth, animatedHeaderHeight );
				renderer.setAnimationLoop( animate );
				container.appendChild( renderer.domElement );

				container.style.touchAction = 'none';
				container.addEventListener( 'pointermove', onPointerMove );

				//

                window.addEventListener( 'resize', onWindowResize );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;

				camera.aspect = window.innerWidth / animatedHeaderHeight; 
				camera.updateProjectionMatrix();

				renderer.setSize(window.innerWidth, animatedHeaderHeight);

			}

			//

			function onPointerMove( event ) {

				if ( event.isPrimary === false ) return;

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}

			//

			function animate() {
				render();

			}

			function render() {

				camera.position.x += ( mouseX - camera.position.x ) * .05;
				camera.position.y += ( - mouseY - camera.position.y ) * .05;
				camera.lookAt( scene.position );

				const positions = particles.geometry.attributes.position.array;
				const scales = particles.geometry.attributes.scale.array;

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i + 1 ] = ( Math.sin( ( ix + count ) * 0.3 ) * 50 ) +
										( Math.sin( ( iy + count ) * 0.5 ) * 50 );

						scales[ j ] = ( Math.sin( ( ix + count ) * 0.3 ) + 1 ) * 20 +
										( Math.sin( ( iy + count ) * 0.5 ) + 1 ) * 20;

						i += 3;
						j ++;

					}

				}

				particles.geometry.attributes.position.needsUpdate = true;
				particles.geometry.attributes.scale.needsUpdate = true;

				renderer.render( scene, camera );

				count += 0.1;

			}

        </script>

    </div>
  <div class="wrapper"><a class="site-title" rel="author" href="/">Harlinn</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Cpp/Cpp.html">C++</a><a class="page-link" href="/Databases/Databases.html">Databases</a><a class="page-link" href="/DotNet/DotNet.html">.Net</a><a class="page-link" href="/Java/Java.html">Java</a><a class="page-link" href="/Julia/Julia.html">Julia</a><a class="page-link" href="/Python/Python.html">Python</a><a class="page-link" href="/R/R.html">R</a><a class="page-link" href="/Rust/Rust.html">Rust</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">PBRTO a micro optimized raytracing app</h1>
  </header>

  <div class="post-content">
    <p>PBRTO is a micro optimized version of <a href="https://github.com/mmp/pbrt-v4">PBRT-v4</a>, created as a testbed and 
comprehensive example of how the functionality in <code class="language-plaintext highlighter-rouge">HCCMath.h</code>, <code class="language-plaintext highlighter-rouge">HCCSIMD.h</code> and <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code> can be used to 
optimize the performance of real, computationally intensive, apps. It’s about <code class="language-plaintext highlighter-rouge">65</code> % 
faster than the release build of the original PBRT.</p>

<p><img src="./assets/Kroken1.png" width="1024" /></p>

<p>PBRT is a well written piece of software, with a code base that is nicely structured, 
and <em>relatively</em> easy to understand and modify.</p>

<p>Most of the solution is contained within the <a href="https://github.com/Harlinn/Harlinn.Windows/tree/master/Examples/Core/Math/Harlinn.pbrto">Harlinn.pbrto</a>
project. This project contains both the original <a href="https://github.com/mmp/pbrt-v4">PBRT-v4</a> and 
my modified version of the raytracer.</p>

<p>PBRT has its own set of optimized mathematical functions, but in some areas there are room for improvement.</p>

<p>Operations on \(4 \times 4\) matrices:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: right">PBRT</th>
      <th style="text-align: right">Math</th>
      <th style="text-align: right">Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Addition</td>
      <td style="text-align: right">8.37 ns</td>
      <td style="text-align: right">1.93 ns</td>
      <td style="text-align: right">333 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Transpose</td>
      <td style="text-align: right">5.00 ns</td>
      <td style="text-align: right">1.95 ns</td>
      <td style="text-align: right">156.4 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Scalar multiplication</td>
      <td style="text-align: right">2.72 ns</td>
      <td style="text-align: right">1.46 ns</td>
      <td style="text-align: right">86.3 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Matrix multiplication</td>
      <td style="text-align: right">26.1 ns</td>
      <td style="text-align: right">4.10 ns</td>
      <td style="text-align: right">536.6 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Determinant</td>
      <td style="text-align: right">11.0 ns</td>
      <td style="text-align: right">2.18 ns</td>
      <td style="text-align: right">404.6 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Inverse</td>
      <td style="text-align: right">126 ns</td>
      <td style="text-align: right">12.3 ns</td>
      <td style="text-align: right">924.4 %</td>
    </tr>
  </tbody>
</table>

<p>Operations on \(3 \times 3\) matrices:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: right">PBRT</th>
      <th style="text-align: right">Math</th>
      <th style="text-align: right">Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Addition</td>
      <td style="text-align: right">8.54 ns</td>
      <td style="text-align: right">2.92 ns</td>
      <td style="text-align: right">192.5 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Transpose</td>
      <td style="text-align: right">6.10 ns</td>
      <td style="text-align: right">2.83 ns</td>
      <td style="text-align: right">115.5 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Scalar multiplication</td>
      <td style="text-align: right">5.44 ns</td>
      <td style="text-align: right">2.18 ns</td>
      <td style="text-align: right">149.5 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Matrix multiplication</td>
      <td style="text-align: right">15.5 ns</td>
      <td style="text-align: right">5.16 ns</td>
      <td style="text-align: right">200.4 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Determinant</td>
      <td style="text-align: right">5.27 ns</td>
      <td style="text-align: right">3.08 ns</td>
      <td style="text-align: right">71.1 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Inverse</td>
      <td style="text-align: right">18.6 ns</td>
      <td style="text-align: right">4.43 ns</td>
      <td style="text-align: right">319.9 %</td>
    </tr>
  </tbody>
</table>

<p>Operations on \(2 \times 2\) matrices:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: right">PBRT</th>
      <th style="text-align: right">Math</th>
      <th style="text-align: right">Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Addition</td>
      <td style="text-align: right">2.69 ns</td>
      <td style="text-align: right">1.90 ns</td>
      <td style="text-align: right">41.6 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Transpose</td>
      <td style="text-align: right">3.85 ns</td>
      <td style="text-align: right">1.37 ns</td>
      <td style="text-align: right">181.0 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Scalar multiplication</td>
      <td style="text-align: right">1.84 ns</td>
      <td style="text-align: right">1.35 ns</td>
      <td style="text-align: right">36.3 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Matrix multiplication</td>
      <td style="text-align: right">4.52 ns</td>
      <td style="text-align: right">1.88 ns</td>
      <td style="text-align: right">140.4 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Determinant</td>
      <td style="text-align: right">1.19 ns</td>
      <td style="text-align: right">1.57 ns</td>
      <td style="text-align: right">-24.2 %</td>
    </tr>
    <tr>
      <td style="text-align: left">Inverse</td>
      <td style="text-align: right">41.7 ns</td>
      <td style="text-align: right">1.77 ns</td>
      <td style="text-align: right">2255.9 %</td>
    </tr>
  </tbody>
</table>

<p>The new rendering machinery uses my <a href="https://harlinn.github.io/Cpp/Cpp/Math/FastLinearAlgebra.html">Fast Linear Algebra Classes for Games and Graphics</a>, 
showcasing their use, and benefits, when integrated with an existing, high performance, solution.</p>

<p>The new machinery is definitely still <a href="https://github.com/mmp/pbrt-v4">pbrt</a>, my changes are small, and incremental - only a
few classes have been fully reimplemented, while maintaining a high degree of compatibility with their original interface.</p>

<p>The machinery reimplements the <code class="language-plaintext highlighter-rouge">Transform</code> class, using a transpose of the 4x4 matrix used by the original <code class="language-plaintext highlighter-rouge">Transform</code> 
implementation, placing translation fully in the 4<sup>th</sup> row of the matrix, instead of spreading it over 3 rows.</p>

<p>The transposed form is generally easier to work with, enabling efficient SIMD based implementations of 
most of the transformations performed by this class using functions implemented in <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code>.</p>

<p>The pbrto implementation of <code class="language-plaintext highlighter-rouge">Vector2&lt;Float&gt;</code>. <code class="language-plaintext highlighter-rouge">Vector3&lt;Float&gt;</code>, <code class="language-plaintext highlighter-rouge">Vector2&lt;Int32&gt;</code>, <code class="language-plaintext highlighter-rouge">Vector3&lt;Int32&gt;</code>,
<code class="language-plaintext highlighter-rouge">Point2&lt;Float&gt;</code>, <code class="language-plaintext highlighter-rouge">Point2&lt;Int32&gt;</code>, <code class="language-plaintext highlighter-rouge">Point3&lt;Float&gt;</code>, <code class="language-plaintext highlighter-rouge">Point3&lt;Int32&gt;</code>, <code class="language-plaintext highlighter-rouge">Normal3&lt;Float&gt;</code>, <code class="language-plaintext highlighter-rouge">Interval</code>,
<code class="language-plaintext highlighter-rouge">Quaternion</code>, <code class="language-plaintext highlighter-rouge">SquareMatrix&lt;N&gt;</code> comes from <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code>, with minor adaptations to their use 
inside pbrto.</p>

<p>Most of <code class="language-plaintext highlighter-rouge">SampledSpectrum</code> and related functions was reimplemented using SIMD::Traits&lt;float,N&gt;, so
<code class="language-plaintext highlighter-rouge">NSpectrumSamples</code> must be a multiple of 4. Setting <code class="language-plaintext highlighter-rouge">NSpectrumSamples</code> to 16 or 32 generates error messages 
during rendering, but still improves the quality of the images.</p>

<p>Calls to most math functions from the standard library have been replaced by calls to their <code class="language-plaintext highlighter-rouge">Harlinn::Common::Core::Math</code> 
counterparts from <code class="language-plaintext highlighter-rouge">HCCMath.h</code>. <code class="language-plaintext highlighter-rouge">Math::SinCos</code> and <code class="language-plaintext highlighter-rouge">Math::Hypot</code> is used where applicable.</p>

<h2 id="rotatefromto">RotateFromTo</h2>

<p><code class="language-plaintext highlighter-rouge">RotateFromTo</code> is a good example of how the new machinery improves performance while retaining
a fair level of API compatibility. Benchmarking the new implementation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BenchmarkPbrtoRotateFromToVector3f              20.3 ns         20.5 ns     37333333
</code></pre></div></div>

<p>and the original pbrt implementation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BenchmarkPbrtRotateFromToVector3f               71.3 ns         71.1 ns     11200000
</code></pre></div></div>

<p>The original implementation of <code class="language-plaintext highlighter-rouge">RotateFromTo</code> from pbrt:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PBRT_CPU_GPU inline Transform RotateFromTo(Vector3f from, Vector3f to) {
    // Compute intermediate vector for vector reflection
    Vector3f refl;
    if (std::abs(from.x) &lt; 0.72f &amp;&amp; std::abs(to.x) &lt; 0.72f)
        refl = Vector3f(1, 0, 0);
    else if (std::abs(from.y) &lt; 0.72f &amp;&amp; std::abs(to.y) &lt; 0.72f)
        refl = Vector3f(0, 1, 0);
    else
        refl = Vector3f(0, 0, 1);

    // Initialize matrix _r_ for rotation
    Vector3f u = refl - from, v = refl - to;
    SquareMatrix&lt;4&gt; r;
    for (int i = 0; i &lt; 3; ++i)
        for (int j = 0; j &lt; 3; ++j)
            // Initialize matrix element _r[i][j]_
            r[i][j] = ((i == j) ? 1 : 0) - 2 / Dot(u, u) * u[i] * u[j] -
                      2 / Dot(v, v) * v[i] * v[j] +
                      4 * Dot(u, v) / (Dot(u, u) * Dot(v, v)) * v[i] * u[j];

    return Transform(r, Transpose(r));
}
</code></pre></div></div>

<p>The new implementation of <code class="language-plaintext highlighter-rouge">RotateFromTo</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>inline Transform RotateFromTo( const Vector3f::Simd&amp; from, const Vector3f::Simd&amp; to )
{
    // Compute intermediate vector for vector reflection
    Vector3f::Simd refl;

    Vector3f absFrom = FastAbs( from );
    Vector3f absTo = FastAbs( to );
        
    if ( absFrom.x &lt; 0.72f &amp;&amp; absTo.x &lt; 0.72f )
        refl = Vector3f::Simd( 1, 0, 0 );
    else if ( absFrom.y &lt; 0.72f &amp;&amp; absTo.y &lt; 0.72f )
        refl = Vector3f::Simd( 0, 1, 0 );
    else
        refl = Vector3f::Simd( 0, 0, 1 );

    
    Vector3f::Simd u = refl - from;
    Vector3f::Simd v = refl - to;

    auto uDotU = Dot( u, u );
    auto vDotV = Dot( v, v );
    auto uDotV = Dot( u, v );

    Vector3f::Simd f1 = 2.f / uDotU * u;
    Vector3f::Simd f2 = 2.f / vDotV * v;
    Vector3f::Simd f3 = 4.f * uDotV / ( uDotU * vDotV ) * u;
        
    Vector3f::Simd vn = v.X( );
    Vector3f::Simd un = u.X( );

    auto r1 = Vector3f::Simd( 1.f, 0.f, 0.f ) - f1 * un - f2 * vn + f3 * vn;

    vn = v.Y( );
    un = u.Y( );

    auto r2 = Vector3f::Simd( 0.f, 1.f, 0.f ) - f1 * un - f2 * vn + f3 * vn;

    vn = v.Z( );
    un = u.Z( );

    auto r3 = Vector3f::Simd( 0.f, 0.f, 1.f ) - f1 * un - f2 * vn + f3 * vn;

    // Initialize matrix _r_ for rotation
    Transform::MatrixSimdType r( r1.simd, r2.simd, r3.simd );

    return Transform( Transpose( r ), r, true  );
}
</code></pre></div></div>

<p>The inner for loop is completely eliminated, and the outer for loop is unrolled.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-----------------------------------------------------------------------------------------
Benchmark                                               Time             CPU   Iterations
-----------------------------------------------------------------------------------------
BenchmarkDoubleGenerator                             2.01 ns         2.00 ns    320000000
BenchmarkFloatGenerator                              1.88 ns         1.88 ns    407272727
BenchmarkDoubleIsSameValue                           1.48 ns         1.50 ns    448000000
BenchmarkFloatIsSameValue                            2.16 ns         2.14 ns    298666667
BenchmarkDoubleIsZero                                1.90 ns         1.90 ns    344615385
BenchmarkFloatIsZero                                 1.42 ns         1.41 ns    497777778
BenchmarkDoubleIsNaN                                 1.55 ns         1.57 ns    448000000
BenchmarkDoubleOpenLibMIsNaN                         2.23 ns         2.20 ns    298666667
BenchmarkDoubleStdIsNaN                              1.54 ns         1.53 ns    407272727
BenchmarkDoublePbrtoIsNaN                            1.70 ns         1.73 ns    407272727
BenchmarkFloatIsNaN                                  1.83 ns         1.84 ns    407272727
BenchmarkFloatOpenLibMIsNaN                          2.57 ns         2.57 ns    280000000
BenchmarkFloatStdIsNaN                               1.78 ns         1.80 ns    407272727
BenchmarkFloatPbrtoIsNaN                             1.69 ns         1.71 ns    448000000
BenchmarkDoubleSignum                                2.36 ns         2.35 ns    298666667
BenchmarkDoubleOpenLibMSignbit                       1.77 ns         1.76 ns    373333333
BenchmarkDoubleNaiveSignum                           2.05 ns         2.05 ns    320000000
BenchmarkFloatSignum                                 2.27 ns         2.25 ns    298666667
BenchmarkFloatOpenLibMSignbit                        1.71 ns         1.67 ns    373333333
BenchmarkFloatNaiveSignum                            2.18 ns         2.20 ns    320000000
BenchmarkDoubleDeg2Rad                               2.07 ns         2.05 ns    320000000
BenchmarkDoublePbrtRadians                           1.82 ns         1.81 ns    344615385
BenchmarkFloatDeg2Rad                                1.97 ns         1.97 ns    373333333
BenchmarkFloatPbrtRadians                            1.86 ns         1.86 ns    344615385
BenchmarkDoubleRad2Deg                               1.98 ns         1.99 ns    344615385
BenchmarkDoublePbrtDegrees                           1.70 ns         1.72 ns    373333333
BenchmarkFloatRad2Deg                                2.03 ns         1.99 ns    344615385
BenchmarkFloatPbrtDegrees                            1.90 ns         1.90 ns    344615385
BenchmarkDoubleNextAfter                             5.72 ns         5.78 ns    100000000
BenchmarkDoubleOpenLibMNextAfter                     9.15 ns         9.24 ns     89600000
BenchmarkDoubleStdNextAfter                          5.75 ns         5.72 ns    112000000
BenchmarkFloatNextAfter                              2.02 ns         2.05 ns    373333333
BenchmarkFloatOpenLibMNextAfter                      2.31 ns         2.34 ns    320000000
BenchmarkFloatStdNextAfter                           4.23 ns         4.24 ns    173020690
BenchmarkDoubleInternalOpenLibMSqrt                  39.3 ns         39.3 ns     18666667
BenchmarkDoubleSqrt                                  1.79 ns         1.76 ns    407272727
BenchmarkDoubleStdSqrt                               15.7 ns         15.7 ns     40727273
BenchmarkDoublePbrtSqrt                              14.9 ns         15.1 ns     49777778
BenchmarkFloatInternalOpenLibMSqrt                   3.09 ns         3.07 ns    224000000
BenchmarkFloatSqrt                                   1.50 ns         1.51 ns    497777778
BenchmarkFloatStdSqrt                                2.36 ns         2.30 ns    298666667
BenchmarkFloatPbrtSqrt                               2.38 ns         2.34 ns    280000000
BenchmarkDoubleNextDown                              2.35 ns         2.35 ns    298666667
BenchmarkDoubleStdNextDown                           7.10 ns         7.11 ns    112000000
BenchmarkFloatNextDown                               2.10 ns         2.13 ns    344615385
BenchmarkFloatStdNextDown                            3.21 ns         3.22 ns    213333333
BenchmarkFloatPbrtNextFloatDown                      3.14 ns         3.11 ns    235789474
BenchmarkDoubleNextUp                                4.35 ns         4.33 ns    165925926
BenchmarkDoubleStdNextUp                             6.79 ns         6.80 ns     89600000
BenchmarkFloatNextUp                                 2.62 ns         2.62 ns    280000000
BenchmarkFloatStdNextUp                              3.21 ns         3.22 ns    203636364
BenchmarkFloatPbrtNextFloatUp                        3.02 ns         2.98 ns    235789474
BenchmarkDoubleIsInf                                 1.67 ns         1.67 ns    448000000
BenchmarkDoubleOpenLibMIsInf                         2.27 ns         2.25 ns    298666667
BenchmarkDoubleStdIsInf                              1.70 ns         1.73 ns    407272727
BenchmarkFloatIsInf                                  1.68 ns         1.67 ns    373333333
BenchmarkFloatOpenLibMIsInf                          2.19 ns         2.20 ns    320000000
BenchmarkFloatStdIsInf                               1.73 ns         1.73 ns    407272727
BenchmarkFloatPbrtIsInf                              1.66 ns         1.69 ns    407272727
BenchmarkDoubleInternalAbs                           1.93 ns         1.86 ns    320000000
BenchmarkDoubleAbs                                   1.54 ns         1.53 ns    407272727
BenchmarkDoubleOpenLibMAbs                           1.63 ns         1.63 ns    373333333
BenchmarkDoubleStdAbs                                1.48 ns         1.43 ns    448000000
BenchmarkDoublePbrtAbs                               1.38 ns         1.38 ns    497777778
BenchmarkFloatInternalAbs                            2.48 ns         2.49 ns    320000000
BenchmarkFloatAbs                                    1.55 ns         1.50 ns    407272727
BenchmarkFloatOpenLibMAbs                            2.32 ns         2.34 ns    320000000
BenchmarkFloatStdAbs                                 1.51 ns         1.50 ns    448000000
BenchmarkFloatPbrtAbs                                1.41 ns         1.40 ns    448000000
BenchmarkDoubleSignBit                               1.70 ns         1.63 ns    373333333
BenchmarkDoubleOpenLibMSignBit                       1.82 ns         1.81 ns    448000000
BenchmarkDoubleStdSignBit                            2.79 ns         2.83 ns    248888889
BenchmarkFloatSignBit                                1.36 ns         1.36 ns    448000000
BenchmarkFloatOpenLibMSignBit                        1.78 ns         1.76 ns    373333333
BenchmarkFloatStdSignBit                             2.49 ns         2.49 ns    263529412
BenchmarkDoubleFRExp                                 3.06 ns         3.05 ns    235789474
BenchmarkDoubleOpenLibMFRExp                         3.04 ns         3.05 ns    235789474
BenchmarkDoubleStdFRExp                              4.33 ns         4.30 ns    160000000
BenchmarkFloatFRExp                                  1.65 ns         1.65 ns    407272727
BenchmarkFloatOpenLibMFRExp                          1.79 ns         1.80 ns    407272727
BenchmarkFloatStdFRExp                               4.03 ns         4.05 ns    165925926
BenchmarkDoubleModF                                  3.45 ns         3.45 ns    194782609
BenchmarkDoubleOpenLibMModF                          3.12 ns         3.08 ns    213333333
BenchmarkDoubleStdModF                               3.97 ns         4.01 ns    194782609
BenchmarkFloatingPointDoubleModF                     2.88 ns         2.86 ns    224000000
BenchmarkFloatModF                                   2.48 ns         2.46 ns    280000000
BenchmarkFloatOpenLibMModF                           2.39 ns         2.37 ns    263529412
BenchmarkFloatingPointFloatModF                      2.58 ns         2.61 ns    263529412
BenchmarkFloatStdModF                                3.34 ns         3.38 ns    203636364
BenchmarkDoubleMin                                   1.45 ns         1.43 ns    448000000
BenchmarkDoubleOpenLibMMin                           2.42 ns         2.40 ns    280000000
BenchmarkDoubleStdMin                                1.59 ns         1.55 ns    373333333
BenchmarkFloatMin                                    1.62 ns         1.64 ns    448000000
BenchmarkFloatOpenLibMMin                            2.31 ns         2.34 ns    320000000
BenchmarkFloatStdMin                                 1.74 ns         1.67 ns    373333333
BenchmarkDoubleMax                                   1.62 ns         1.61 ns    407272727
BenchmarkDoubleOpenLibMMax                           3.09 ns         3.07 ns    224000000
BenchmarkDoubleStdMax                                1.67 ns         1.67 ns    373333333
BenchmarkFloatMax                                    1.64 ns         1.61 ns    407272727
BenchmarkFloatOpenLibMMax                            3.07 ns         3.07 ns    224000000
BenchmarkFloatStdMax                                 1.65 ns         1.63 ns    373333333
BenchmarkDoubleTrunc                                 1.59 ns         1.57 ns    407272727
BenchmarkDoubleOpenLibMTrunc                         3.20 ns         3.14 ns    248888889
BenchmarkFloatingPointDoubleTrunc                    1.92 ns         1.86 ns    344615385
BenchmarkDoubleStdTrunc                              3.59 ns         3.53 ns    203636364
BenchmarkFloatTrunc                                  1.83 ns         1.80 ns    373333333
BenchmarkFloatOpenLibMTrunc                          1.94 ns         1.90 ns    344615385
BenchmarkFloatingPointFloatTrunc                     2.27 ns         2.25 ns    298666667
BenchmarkFloatStdTrunc                               1.66 ns         1.67 ns    448000000
BenchmarkDoubleFloor                                 1.58 ns         1.57 ns    407272727
BenchmarkDoubleOpenLibMFloor                         2.91 ns         2.92 ns    235789474
BenchmarkFloatingPointDoubleFloor                    3.47 ns         3.49 ns    179200000
BenchmarkDoubleStdFloor                              1.59 ns         1.57 ns    407272727
BenchmarkFloatFloor                                  1.68 ns         1.69 ns    407272727
BenchmarkFloatOpenLibMFloor                          2.84 ns         2.85 ns    235789474
BenchmarkFloatingPointFloatFloor                     4.16 ns         4.08 ns    172307692
BenchmarkFloatStdFloor                               1.73 ns         1.74 ns    448000000
BenchmarkDoubleCeil                                  1.66 ns         1.69 ns    407272727
BenchmarkDoubleOpenLibMCeil                          3.11 ns         3.07 ns    224000000
BenchmarkFloatingPointDoubleCeil                     2.99 ns         3.05 ns    235789474
BenchmarkDoubleStdCeil                               1.62 ns         1.61 ns    407272727
BenchmarkFloatCeil                                   1.53 ns         1.53 ns    448000000
BenchmarkFloatOpenLibMCeil                           2.40 ns         2.44 ns    320000000
BenchmarkFloatingPointFloatCeil                      2.14 ns         2.06 ns    280000000
BenchmarkFloatStdCeil                                1.61 ns         1.61 ns    407272727
BenchmarkDoubleRound                                 1.59 ns         1.60 ns    448000000
BenchmarkDoubleOpenLibMRound                         4.38 ns         4.34 ns    161858065
BenchmarkFloatingPointDoubleRound                    4.03 ns         3.98 ns    224000000
BenchmarkDoubleStdRound                              3.20 ns         3.25 ns    235789474
BenchmarkFloatRound                                  2.23 ns         2.18 ns    280000000
BenchmarkFloatOpenLibMRound                          2.07 ns         2.09 ns    373333333
BenchmarkFloatingPointFloatRound                     3.33 ns         3.29 ns    194782609
BenchmarkFloatStdRound                               2.22 ns         2.25 ns    320000000
BenchmarkDoubleClamp                                 3.49 ns         3.45 ns    194782609
BenchmarkDoubleStdClamp                              1.83 ns         1.81 ns    320000000
BenchmarkFloatClamp                                  2.12 ns         2.10 ns    320000000
BenchmarkFloatStdClamp                               2.18 ns         2.20 ns    320000000
BenchmarkFloatPbrtClamp                              2.21 ns         2.20 ns    298666667
BenchmarkDoubleInternalLerpImpl                      3.17 ns         3.22 ns    213333333
BenchmarkDoubleLerp                                  8.79 ns         8.79 ns     64000000
BenchmarkDoubleStdLerp                               9.11 ns         9.21 ns     74666667
BenchmarkFloatLerp                                   3.69 ns         3.68 ns    186666667
BenchmarkFloatInternalLerpImpl                       2.31 ns         2.34 ns    280000000
BenchmarkFloatStdLerp                                3.65 ns         3.68 ns    203636364
BenchmarkFloatPbrtLerp                               1.57 ns         1.57 ns    407272727
BenchmarkDoubleCopySign                              1.61 ns         1.64 ns    448000000
BenchmarkDoubleOpenLibMCopySign                      1.63 ns         1.65 ns    407272727
BenchmarkDoubleStdCopySign                           2.99 ns         3.00 ns    224000000
BenchmarkDoublePbrtCopySign                          3.02 ns         3.00 ns    224000000
BenchmarkFloatCopySign                               1.81 ns         1.80 ns    373333333
BenchmarkFloatOpenLibMCopySign                       2.14 ns         2.09 ns    298666667
BenchmarkFloatStdCopySign                            1.71 ns         1.67 ns    373333333
BenchmarkFloatPbrtCopySign                           1.63 ns         1.63 ns    373333333
BenchmarkDoubleScaleByN                              3.30 ns         3.22 ns    213333333
BenchmarkDoubleOpenLibMScaleByN                      3.83 ns         3.84 ns    179200000
BenchmarkDoubleStdScaleByN                           5.32 ns         5.31 ns    100000000
BenchmarkFloatScaleByN                               2.46 ns         2.46 ns    280000000
BenchmarkFloatOpenLibMScaleByN                       2.80 ns         2.83 ns    248888889
BenchmarkFloatStdScaleByN                            3.62 ns         3.53 ns    194782609
BenchmarkDoubleFMod                                   117 ns          117 ns      5600000
BenchmarkDoubleOpenLibMFMod                          1183 ns         1193 ns       497778
BenchmarkDoubleStdFMod                                118 ns          114 ns      5600000
BenchmarkFloatFMod                                   3.79 ns         3.77 ns    194782609
BenchmarkFloatOpenLibMFMod                           3.61 ns         3.60 ns    186666667
BenchmarkFloatStdFMod                                6.76 ns         6.70 ns    112000000
BenchmarkFloatPbrtFMod                               7.85 ns         7.67 ns     89600000
BenchmarkDoubleExp                                   3.60 ns         3.61 ns    194782609
BenchmarkDoubleOpenLibMExp                           3.56 ns         3.61 ns    203636364
BenchmarkDoubleStdExp                                28.1 ns         27.9 ns     26352941
BenchmarkFloatExp                                    3.10 ns         3.14 ns    224000000
BenchmarkFloatOpenLibMExp                            3.03 ns         2.92 ns    235789474
BenchmarkFloatStdExp                                 4.89 ns         4.97 ns    144516129
BenchmarkFloatPbrtFastExp                            2.77 ns         2.78 ns    213333333
BenchmarkDoubleHypot                                 2.04 ns         2.04 ns    298666667
BenchmarkDoubleOpenLibMHypot                         5.51 ns         5.47 ns    100000000
BenchmarkDoubleOpenLibMFastHypot                     5.20 ns         5.16 ns    100000000
BenchmarkDoubleStdHypot                              4.71 ns         4.54 ns    144516129
BenchmarkFloatHypot                                  1.84 ns         1.81 ns    320000000
BenchmarkFloatOpenLibMHypot                          5.05 ns         5.00 ns    100000000
BenchmarkFloatOpenLibMFastHypot                      3.78 ns         3.77 ns    186666667
BenchmarkFloatStdHypot                               4.78 ns         4.71 ns    149333333
BenchmarkDoubleHypot3                                3.33 ns         3.30 ns    203636364
BenchmarkDoubleStdHypot3                             4.31 ns         4.35 ns    154482759
BenchmarkFloatHypot3                                 2.26 ns         2.27 ns    344615385
BenchmarkFloatStdHypot3                              7.36 ns         7.32 ns     89600000
BenchmarkDoubleLog                                   7.20 ns         7.15 ns     89600000
BenchmarkDoubleOpenLibMLog                           7.24 ns         7.25 ns    112000000
BenchmarkDoubleStdLog                                19.2 ns         19.0 ns     34461538
BenchmarkFloatLog                                    3.15 ns         3.18 ns    235789474
BenchmarkFloatOpenLibMLog                            2.95 ns         2.98 ns    235789474
BenchmarkFloatStdLog                                 6.00 ns         5.93 ns     89600000
BenchmarkDoubleLog2                                  9.24 ns         9.21 ns     74666667
BenchmarkDoubleOpenLibMLog2                          8.37 ns         8.37 ns     74666667
BenchmarkDoubleStdLog2                               22.3 ns         22.0 ns     32000000
BenchmarkFloatLog2                                   3.34 ns         3.28 ns    224000000
BenchmarkFloatOpenLibMLog2                           2.95 ns         2.93 ns    213333333
BenchmarkFloatStdLog2                                5.90 ns         5.86 ns    112000000
BenchmarkDoubleLog10                                 8.77 ns         8.54 ns     89600000
BenchmarkDoubleOpenLibMLog10                         8.61 ns         8.58 ns     74666667
BenchmarkDoubleStdLog10                              21.5 ns         21.5 ns     32000000
BenchmarkFloatLog10                                  3.07 ns         3.07 ns    224000000
BenchmarkFloatOpenLibMLog10                          3.07 ns         3.00 ns    213333333
BenchmarkFloatStdLog10                               6.11 ns         6.10 ns     89600000
BenchmarkDoubleOpenLibMSin                           9.18 ns         9.28 ns     64000000
BenchmarkDoubleSin                                   7.65 ns         7.67 ns     89600000
BenchmarkDoubleStdSin                                7.86 ns         7.85 ns     89600000
BenchmarkFloatOpenLibMSin                            4.69 ns         4.65 ns    144516129
BenchmarkFloatSin                                    4.71 ns         4.79 ns    160000000
BenchmarkFloatStdSin                                 7.24 ns         6.98 ns     89600000
BenchmarkDoubleOpenLibMCos                           9.85 ns         10.0 ns     74666667
BenchmarkDoubleCos                                   7.86 ns         7.85 ns     89600000
BenchmarkDoubleStdCos                                7.61 ns         7.67 ns     89600000
BenchmarkFloatOpenLibMCos                            5.52 ns         5.62 ns    100000000
BenchmarkFloatCos                                    5.51 ns         5.62 ns    100000000
BenchmarkFloatStdCos                                 7.19 ns         7.15 ns     89600000
BenchmarkDoubleOpenLibMSinCos                        8.47 ns         8.37 ns     74666667
BenchmarkFloatOpenLibMSinCos                         5.72 ns         5.72 ns    112000000
BenchmarkFloatDirectXSinCos                          10.4 ns         10.5 ns     74666667
BenchmarkDoubleTan                                   12.6 ns         12.6 ns     49777778
BenchmarkDoubleOpenLibMTan                           17.0 ns         17.2 ns     37333333
BenchmarkDoubleStdTan                                12.7 ns         12.6 ns     56000000
BenchmarkFloatTan                                    5.66 ns         5.58 ns    112000000
BenchmarkFloatOpenLibMTan                            5.70 ns         5.47 ns    100000000
BenchmarkFloatStdTan                                 7.68 ns         7.67 ns     89600000
BenchmarkDoubleATan                                  8.79 ns         8.79 ns     64000000
BenchmarkDoubleOpenLibMATan                          8.98 ns         9.00 ns     74666667
BenchmarkDoubleStdATan                               7.43 ns         7.25 ns    112000000
BenchmarkFloatATan                                   6.21 ns         6.28 ns    112000000
BenchmarkFloatOpenLibMATan                           6.68 ns         6.70 ns    112000000
BenchmarkFloatStdATan                                6.19 ns         6.14 ns    112000000
BenchmarkDoubleASin                                  8.29 ns         8.37 ns     89600000
BenchmarkDoubleOpenLibMASin                          49.0 ns         48.8 ns     11200000
BenchmarkDoubleOpenLibMFastASin                      8.28 ns         8.37 ns     89600000
BenchmarkDoubleStdASin                               8.26 ns         8.20 ns     89600000
BenchmarkFloatASin                                   5.75 ns         5.72 ns    112000000
BenchmarkFloatOpenLibMASin                           51.0 ns         50.2 ns     11200000
BenchmarkFloatOpenLibMFastASin                       6.29 ns         6.25 ns    100000000
BenchmarkFloatStdASin                                7.36 ns         7.32 ns     89600000
BenchmarkDoubleACos                                  7.22 ns         7.25 ns    112000000
BenchmarkDoubleOpenLibMACos                          48.2 ns         47.4 ns     11200000
BenchmarkDoubleOpenLibMFastACos                      6.81 ns         6.80 ns     89600000
BenchmarkDoubleStdACos                               8.36 ns         8.37 ns     74666667
BenchmarkFloatACos                                   5.09 ns         5.16 ns    100000000
BenchmarkFloatOpenLibMACos                           17.1 ns         16.6 ns     32000000
BenchmarkFloatOpenLibMFastACos                       4.69 ns         4.76 ns    144516129
BenchmarkFloatStdACos                                7.05 ns         6.98 ns     89600000
BenchmarkDoubleATan2                                 15.4 ns         15.3 ns     40727273
BenchmarkDoubleOpenLibMATan2                         15.3 ns         15.3 ns     40727273
BenchmarkDoubleStdATan2                              16.9 ns         16.5 ns     40727273
BenchmarkFloatATan2                                  10.6 ns         10.5 ns     64000000
BenchmarkFloatOpenLibMATan2                          10.8 ns         10.7 ns     64000000
BenchmarkFloatStdATan2                               11.2 ns         10.9 ns     56000000
BenchmarkFloatFMA                                    1.71 ns         1.73 ns    407272727
BenchmarkPbrtFloatFMA                                1.61 ns         1.61 ns    407272727
BenchmarkFloatSinXOverX                              5.42 ns         5.47 ns    100000000
BenchmarkPbrtFloatSinXOverX                          6.16 ns         6.25 ns    100000000
BenchmarkFloatExpM1                                  16.9 ns         16.9 ns     40727273
BenchmarkFloatOpenLibMExpM1                          11.8 ns         11.4 ns     56000000
BenchmarkFloatSinc                                   5.65 ns         5.72 ns    112000000
BenchmarkPbrtFloatSinc                               8.62 ns         8.58 ns     74666667
BenchmarkFloatMod                                    3.66 ns         3.68 ns    203636364
BenchmarkPbrtFloatMod                                7.54 ns         7.50 ns     89600000
BenchmarkFloatSmoothStep                             2.87 ns         2.93 ns    224000000
BenchmarkPbrtFloatSmoothStep                         2.46 ns         2.49 ns    263529412
BenchmarkFloatSafeSqrt                               1.49 ns         1.43 ns    448000000
BenchmarkPbrtFloatSafeSqrt                           2.21 ns         2.22 ns    344615385
BenchmarkFloatSqr                                    1.46 ns         1.48 ns    497777778
BenchmarkPbrtFloatSqr                                1.52 ns         1.50 ns    448000000
BenchmarkFloatSafeASin                               7.64 ns         7.67 ns     89600000
BenchmarkPbrtFloatSafeASin                           8.71 ns         8.72 ns     89600000
BenchmarkFloatSafeACos                               5.39 ns         5.47 ns    100000000
BenchmarkPbrtFloatSafeACos                           12.9 ns         12.8 ns     74666667
BenchmarkFloatNextFloatUp                            3.97 ns         3.93 ns    186666667
BenchmarkPbrtFloatNextFloatUp                        6.09 ns         5.94 ns    100000000
BenchmarkFloatNextFloatDown                          2.58 ns         2.55 ns    250880000
BenchmarkPbrtFloatNextFloatDown                      3.75 ns         3.77 ns    194782609
BenchmarkFloatAddRoundUp                             3.42 ns         3.36 ns    185837037
BenchmarkPbrtFloatAddRoundUp                         3.74 ns         3.66 ns    179200000
BenchmarkFloatAddRoundDown                           3.20 ns         3.22 ns    203636364
BenchmarkPbrtFloatAddRoundDown                       4.56 ns         4.53 ns    203636364
BenchmarkFloatSubRoundUp                             4.14 ns         4.00 ns    160000000
BenchmarkPbrtFloatSubRoundUp                         6.52 ns         6.56 ns    100000000
BenchmarkFloatSubRoundDown                           2.85 ns         2.76 ns    248888889
BenchmarkPbrtFloatSubRoundDown                       5.90 ns         5.91 ns    145437682
BenchmarkFloatMulRoundUp                             4.09 ns         4.14 ns    165925926
BenchmarkPbrtFloatMulRoundUp                         3.44 ns         3.42 ns    160000000
BenchmarkFloatMulRoundDown                           3.13 ns         3.14 ns    248888889
BenchmarkPbrtFloatMulRoundDown                       3.68 ns         3.63 ns    172307692
BenchmarkFloatDivRoundUp                             2.72 ns         2.78 ns    235789474
BenchmarkPbrtFloatDivRoundUp                         3.86 ns         3.92 ns    179200000
BenchmarkFloatDivRoundDown                           2.40 ns         2.34 ns    280000000
BenchmarkPbrtFloatDivRoundDown                       4.19 ns         4.17 ns    172307692
BenchmarkFloatSqrtRoundUp                            2.61 ns         2.64 ns    248888889
BenchmarkPbrtFloatSqrtRoundUp                        3.05 ns         3.07 ns    224000000
BenchmarkFloatSqrtRoundDown                          2.18 ns         2.20 ns    298666667
BenchmarkPbrtFloatSqrtRoundDown                      3.50 ns         3.53 ns    194782609
BenchmarkFloatFMARoundUp                             3.36 ns         3.13 ns    194782609
BenchmarkPbrtFloatFMARoundUp                         3.08 ns         2.99 ns    203636364
BenchmarkFloatFMARoundDown                           2.30 ns         2.31 ns    263529412
BenchmarkPbrtFloatFMARoundDown                       3.26 ns         3.30 ns    203636364
BenchmarkFloatFastLog2                               8.51 ns         8.37 ns     74666667
BenchmarkPbrtFloatLog2                               6.83 ns         6.88 ns    100000000
BenchmarkFloatLog2Int                                3.39 ns         3.38 ns    203636364
BenchmarkPbrtFloatLog2Int                            3.30 ns         3.30 ns    213333333
BenchmarkFloatGaussian                               6.21 ns         6.28 ns    112000000
BenchmarkPbrtFloatGaussian                           6.61 ns         6.70 ns    112000000
BenchmarkFloatLogistic                               10.1 ns         10.3 ns     64000000
BenchmarkPbrtFloatLogistic                           11.0 ns         11.2 ns     56000000
BenchmarkFloatDifferenceOfProducts                   2.92 ns         2.96 ns    280000000
BenchmarkPbrtFloatDifferenceOfProducts               2.80 ns         2.78 ns    235789474
BenchmarkFloatSumOfProducts                          2.84 ns         2.83 ns    248888889
BenchmarkPbrtFloatSumOfProducts                      2.77 ns         2.79 ns    263529412
BenchmarkFloatQuadratic                              2.93 ns         2.92 ns    235789474
BenchmarkFloatPbrtQuadratic                          2.89 ns         2.85 ns    235789474
BenchmarkFloatIntervalMultiply                       12.2 ns         12.0 ns     56000000
BenchmarkPbrtFloatIntervalMultiply                   46.7 ns         46.0 ns     11200000
BenchmarkFloatIntervalDivide                         15.6 ns         15.7 ns     44800000
BenchmarkPbrtFloatIntervalDivide                     44.2 ns         45.0 ns     14933333
BenchmarkFloatIntervalScalarMultiply                 5.40 ns         5.30 ns    112000000
BenchmarkPbrtFloatIntervalScalarMultiply             5.70 ns         5.78 ns    100000000
BenchmarkFloatIntervalScalarDivision                 5.96 ns         6.00 ns    112000000
BenchmarkPbrtFloatIntervalScalarDivision             6.24 ns         6.28 ns    112000000
BenchmarkFloatIntervalAddition                       4.74 ns         4.76 ns    144516129
BenchmarkPbrtFloatIntervalAddition                   6.09 ns         6.14 ns    112000000
BenchmarkFloatIntervalSubtraction                    4.40 ns         4.35 ns    154482759
BenchmarkPbrtFloatIntervalSubtraction                6.12 ns         6.00 ns    112000000
BenchmarkFloatIntervalScalarAddition                 5.29 ns         5.31 ns    100000000
BenchmarkPbrtFloatIntervalScalarAddition             7.18 ns         7.15 ns     89600000
BenchmarkFloatIntervalScalarSubtraction              4.89 ns         5.00 ns    100000000
BenchmarkPbrtFloatIntervalScalarSubtraction          7.74 ns         7.67 ns     89600000
BenchmarkFloatIntervalSqrt                           4.64 ns         4.74 ns    112000000
BenchmarkPbrtFloatIntervalSqrt                       8.05 ns         7.95 ns     74666667
BenchmarkFloatIntervalFMA                            15.4 ns         15.3 ns     44800000
BenchmarkPbrtFloatIntervalFMA                        47.7 ns         47.4 ns     11200000
BenchmarkFloatIntervalDifferenceOfProducts           21.6 ns         21.5 ns     32000000
BenchmarkPbrtFloatIntervalDifferenceOfProducts       88.4 ns         87.9 ns      7466667
BenchmarkFloatIntervalSumOfProducts                  22.1 ns         22.0 ns     29866667
BenchmarkPbrtFloatIntervalSumOfProducts              84.3 ns         83.7 ns      7466667
BenchmarkFloatIntervalQuadratic                      29.0 ns         29.2 ns     23578947
BenchmarkPbrtFloatIntervalQuadratic                  91.0 ns         87.9 ns      6400000
BenchmarkFloatIntervalACos                           12.8 ns         12.9 ns     49777778
BenchmarkPbrtFloatIntervalACos                       19.2 ns         19.0 ns     34461538
BenchmarkFloatIntervalCos                            12.4 ns         12.3 ns     56000000
BenchmarkPbrtFloatIntervalCos                        20.3 ns         20.0 ns     32000000
BenchmarkFloatIntervalSin                            12.5 ns         12.6 ns     44800000
BenchmarkPbrtFloatIntervalSin                        23.8 ns         23.5 ns     29866667
BenchmarkDoubleOpenLibMSinH                          12.3 ns         12.2 ns     49777778
BenchmarkDoubleMathSinH                              8.61 ns         8.72 ns     89600000
BenchmarkDoubleStdSinH                               10.9 ns         10.7 ns     64000000
BenchmarkFloatOpenLibMSinH                           11.4 ns         11.4 ns     56000000
BenchmarkFloatMathSinH                               14.0 ns         14.1 ns     49777778
BenchmarkFloatStdSinH                                8.50 ns         8.37 ns     74666667
BenchmarkDoubleOpenLibMASinH                         21.5 ns         21.0 ns     32000000
BenchmarkDoubleMathASinH                             19.6 ns         19.9 ns     34461538
BenchmarkDoubleStdASinH                              20.6 ns         20.9 ns     34461538
BenchmarkFloatOpenLibMASinH                          18.7 ns         18.6 ns     32000000
BenchmarkFloatMathASinH                              19.5 ns         18.8 ns     29866667
BenchmarkFloatStdASinH                               16.2 ns         16.1 ns     40727273
BenchmarkDoubleOpenLibMCosH                          13.2 ns         13.2 ns     49777778
BenchmarkDoubleMathCosH                              10.5 ns         10.5 ns     64000000
BenchmarkDoubleStdCosH                               9.68 ns         9.77 ns     64000000
BenchmarkFloatOpenLibMCosH                           10.7 ns         10.6 ns     56000000
BenchmarkFloatMathCosH                               11.7 ns         11.7 ns     56000000
BenchmarkFloatStdCosH                                9.41 ns         9.42 ns     74666667
BenchmarkDoubleOpenLibMACosH                         2.81 ns         2.83 ns    248888889
BenchmarkDoubleMathACosH                             7.51 ns         7.50 ns     89600000
BenchmarkDoubleStdACosH                              25.5 ns         25.1 ns     24888889
BenchmarkFloatOpenLibMACosH                          2.89 ns         2.85 ns    235789474
BenchmarkFloatMathACosH                              18.8 ns         18.8 ns     37333333
BenchmarkFloatStdACosH                               25.7 ns         25.5 ns     26352941
BenchmarkDoubleOpenLibMTanH                          18.3 ns         18.4 ns     37333333
BenchmarkDoubleMathTanH                              11.8 ns         11.7 ns     56000000
BenchmarkDoubleStdTanH                               8.67 ns         8.37 ns     74666667
BenchmarkFloatOpenLibMTanH                           16.2 ns         16.4 ns     44800000
BenchmarkFloatMathTanH                               13.0 ns         12.6 ns     49777778
BenchmarkFloatStdTanH                                7.55 ns         7.50 ns     89600000
BenchmarkDoubleOpenLibMATanH                         17.9 ns         18.0 ns     37333333
BenchmarkDoubleMathATanH                             20.4 ns         20.4 ns     34461538
BenchmarkDoubleStdATanH                              13.4 ns         13.5 ns     49777778
BenchmarkFloatOpenLibMATanH                          17.3 ns         17.3 ns     40727273
BenchmarkFloatMathATanH                              27.1 ns         27.2 ns     29866667
BenchmarkFloatStdATanH                               11.9 ns         12.0 ns     56000000
BenchmarkXMQuaternionSlerp                           43.6 ns         43.5 ns     15448276
BenchmarkQuaternionSlerp                             40.6 ns         40.0 ns     16000000
BenchmarkPbrtQuaternionSlerp                         64.9 ns         64.2 ns     11200000
BenchmarkXMQuaternionMultiply                        5.14 ns         5.16 ns    112000000
BenchmarkQuaternionMultiply                          5.12 ns         5.16 ns    100000000
BenchmarkXMQuaternionRotationNormal                  8.85 ns         9.00 ns     74666667
BenchmarkQuaternionFromNormalizedAxisAndAngle        8.52 ns         8.58 ns     74666667
BenchmarkFloatNextDown3A                             3.43 ns         3.45 ns    203636364
BenchmarkFloatNextDown3B                             6.58 ns         6.56 ns    112000000
BenchmarkPbrtFloatNextDown3                          5.84 ns         5.86 ns    112000000
BenchmarkPbrtSquareMatrix4x4Add                      11.1 ns         11.2 ns     56000000
BenchmarkSquareMatrix4x4Add                          2.81 ns         2.79 ns    263529412
BenchmarkPbrtSquareMatrix3x3Add                      11.7 ns         11.6 ns     49777778
BenchmarkSquareMatrix3x3Add                          3.72 ns         3.75 ns    179200000
BenchmarkPbrtSquareMatrix2x2Add                      2.95 ns         2.95 ns    248888889
BenchmarkSquareMatrix2x2Add                          2.25 ns         2.27 ns    344615385
BenchmarkSquareMatrix4x4Sub                          2.61 ns         2.62 ns    280000000
BenchmarkSquareMatrix3x3Sub                          3.75 ns         3.75 ns    179200000
BenchmarkPbrtSquareMatrix4x4Transpose                6.65 ns         6.70 ns     74666667
BenchmarkSquareMatrix4x4Transpose                    2.62 ns         2.55 ns    263529412
BenchmarkPbrtSquareMatrix3x3Transpose                7.44 ns         7.50 ns     89600000
BenchmarkSquareMatrix3x3Transpose                    3.53 ns         3.52 ns    186666667
BenchmarkPbrtSquareMatrix2x2Transpose                2.34 ns         2.30 ns    298666667
BenchmarkSquareMatrix2x2Transpose                    1.75 ns         1.76 ns    407272727
BenchmarkPbrtSquareMatrix4x4ScalarMultiply           3.98 ns         4.01 ns    179200000
BenchmarkSquareMatrix4x4ScalarMultiply               2.05 ns         2.05 ns    320000000
BenchmarkPbrtSquareMatrix3x3ScalarMultiply           6.77 ns         6.84 ns    112000000
BenchmarkSquareMatrix3x3ScalarMultiply               2.52 ns         2.51 ns    280000000
BenchmarkPbrtSquareMatrix2x2ScalarMultiply           2.06 ns         2.05 ns    320000000
BenchmarkSquareMatrix2x2ScalarMultiply               1.58 ns         1.57 ns    407272727
BenchmarkPbrtSquareMatrix4x4Multiply                 31.8 ns         31.4 ns     22400000
BenchmarkSquareMatrix4x4Multiply                     7.12 ns         7.11 ns    112000000
BenchmarkPbrtSquareMatrix3x3Multiply                 20.9 ns         20.5 ns     32000000
BenchmarkSquareMatrix3x3Multiply                     6.03 ns         5.86 ns    112000000
BenchmarkPbrtSquareMatrix2x2Multiply                 2.81 ns         2.83 ns    248888889
BenchmarkSquareMatrix2x2Multiply                     2.39 ns         2.40 ns    280000000
BenchmarkPbrtSquareMatrix4x4Determinant              12.7 ns         12.9 ns     49777778
BenchmarkXMMatrix4x4Determinant                      2.88 ns         2.86 ns    213333333
BenchmarkSquareMatrix4x4Determinant                  3.07 ns         3.07 ns    224000000
BenchmarkPbrtSquareMatrix3x3Determinant              5.86 ns         5.94 ns    100000000
BenchmarkSquareMatrix3x3Determinant                  3.77 ns         3.77 ns    186666667
BenchmarkPbrtSquareMatrix2x2Determinant              1.57 ns         1.59 ns    373333333
BenchmarkSquareMatrix2x2Determinant                  2.01 ns         2.01 ns    373333333
BenchmarkPbrtSquareMatrix4x4Inverse                   141 ns          141 ns      4977778
BenchmarkXMMatrix4x4Inverse                          15.7 ns         15.7 ns     40727273
BenchmarkSquareMatrix4x4Inverse                      17.1 ns         17.3 ns     40727273
BenchmarkPbrtSquareMatrix3x3Inverse                  23.8 ns         24.1 ns     29866667
BenchmarkSquareMatrix3x3Inverse                      5.98 ns         6.00 ns    112000000
BenchmarkPbrtSquareMatrix2x2Inverse                  44.1 ns         42.5 ns     15448276
BenchmarkSquareMatrix2x2Inverse                      2.71 ns         2.72 ns    235789474
BenchmarkPointRotation                               23.6 ns         23.0 ns     29866667
BenchmarkPointXMMatrixRotationRollPitchYaw           22.9 ns         23.0 ns     29866667
BenchmarkPointRotationAxis                           13.6 ns         13.6 ns     44800000
BenchmarkPointXMMatrixRotationAxis                   19.9 ns         19.9 ns     34461538
BenchmarkVectorRotationAxis                          13.4 ns         13.3 ns     44800000
BenchmarkVectorXMMatrixRotationAxis                  19.4 ns         19.5 ns     34461538
BenchmarkNormalRotationAxis                          13.4 ns         13.2 ns     49777778
BenchmarkNormalXMMatrixRotationAxis                  23.2 ns         23.4 ns     37333333
BenchmarkPointTranslation                            4.40 ns         4.44 ns    161858065
BenchmarkPointXMMatrixTranslation                    4.51 ns         4.59 ns    160000000
BenchmarkVectorTranslation                           4.45 ns         4.35 ns    154482759
BenchmarkVectorXMMatrixTranslation                   5.26 ns         5.27 ns    165925926
BenchmarkNormalTranslation                           3.44 ns         3.36 ns    172307692
BenchmarkNormalXMMatrixTranslation                   3.46 ns         3.30 ns    213333333
BenchmarkPointScaling                                4.45 ns         4.49 ns    160000000
BenchmarkPointXMMatrixScaling                        5.68 ns         5.78 ns    100000000
BenchmarkVectorScaling                               5.04 ns         5.00 ns    100000000
BenchmarkVectorXMMatrixScaling                       5.40 ns         5.30 ns    112000000
BenchmarkNormalScaling                               4.45 ns         4.39 ns    149333333
BenchmarkNormalXMMatrixScaling                       4.10 ns         4.10 ns    160000000
BenchmarkPointTransformationMatrix                   3.62 ns         3.61 ns    194782609
BenchmarkPointXMMatrixTransformation                 3.15 ns         3.15 ns    213333333
BenchmarkVectorTransformationMatrix                  3.06 ns         3.08 ns    213333333
BenchmarkVectorXMMatrixTransformation                3.15 ns         3.15 ns    203636364
BenchmarkNormalTransformationMatrix                  3.14 ns         3.07 ns    203636364
BenchmarkNormalXMMatrixTransformation                3.12 ns         3.15 ns    213333333
BenchmarkPointAffineTransformationMatrix             39.2 ns         38.5 ns     18666667
BenchmarkPointXMMatrixAffineTransformation           31.2 ns         31.0 ns     18666667
BenchmarkVectorAffineTransformationMatrix            33.3 ns         32.9 ns     19478261
BenchmarkVectorXMMatrixAffineTransformation          30.2 ns         29.9 ns     20363636
BenchmarkNormalAffineTransformationMatrix            35.5 ns         35.3 ns     19478261
BenchmarkNormalXMMatrixAffineTransformation          29.6 ns         30.0 ns     22400000
BenchmarkPointLookTo                                 18.7 ns         18.6 ns     34461538
BenchmarkPointXMMatrixLookToLH                       27.9 ns         27.8 ns     23578947
BenchmarkVectorLookTo                                17.9 ns         18.0 ns     40727273
BenchmarkVectorXMMatrixLookToLH                      27.7 ns         27.2 ns     23578947
BenchmarkNormalLookTo                                18.0 ns         18.0 ns     37333333
BenchmarkNormalXMMatrixLookToLH                      26.4 ns         26.7 ns     26352941
BenchmarkPointLookAt                                 20.9 ns         21.0 ns     32000000
BenchmarkPointXMMatrixLookAtLH                       28.9 ns         28.5 ns     23578947
BenchmarkVectorLookAt                                19.7 ns         19.9 ns     34461538
BenchmarkVectorXMMatrixLookAtLH                      27.5 ns         26.5 ns     23578947
BenchmarkNormalLookAt                                18.9 ns         18.8 ns     37333333
BenchmarkNormalXMMatrixLookAtLH                      27.8 ns         27.6 ns     24888889
BenchmarkPointPerspectiveProjection                  3.61 ns         3.61 ns    194782609
BenchmarkPointXMMatrixPerspectiveLH                  4.04 ns         3.84 ns    154482759
BenchmarkVectorPerspectiveProjection                 3.14 ns         3.14 ns    224000000
BenchmarkVectorXMMatrixPerspectiveLH                 3.52 ns         3.53 ns    203636364
BenchmarkVectorPerspectiveProjection                 3.42 ns         3.45 ns    203636364
BenchmarkNormalXMMatrixPerspectiveLH                 3.63 ns         3.61 ns    203636364
BenchmarkPointPerspectiveFovProjection               10.1 ns         10.0 ns     74666667
BenchmarkPointXMMatrixPerspectiveFovLH               16.6 ns         16.5 ns     40727273
BenchmarkVectorPerspectiveFovProjection              8.27 ns         8.16 ns     74666667
BenchmarkVectorXMMatrixPerspectiveFovLH              16.0 ns         16.0 ns     44800000
BenchmarkNormalPerspectiveFovProjection              8.50 ns         8.58 ns     74666667
BenchmarkNormalXMMatrixPerspectiveFovLH              15.9 ns         16.0 ns     44800000
BenchmarkPointProject                                44.2 ns         43.9 ns     16000000
BenchmarkPointXMVector3Project                       57.1 ns         57.2 ns     11200000
BenchmarkMathAffineTransformationPoint3f             3.46 ns         3.44 ns    213333333
BenchmarkPbrtTransformPoint3f                        4.30 ns         4.30 ns    160000000
BenchmarkMathAffineTransformationNormal3f            3.37 ns         3.38 ns    203636364
BenchmarkPbrtTransformNormal3f                       3.04 ns         3.08 ns    213333333
BenchmarkMathAffineTransformationVector3f            3.14 ns         3.13 ns    194782609
BenchmarkPbrtTransformVector3f                       3.34 ns         3.30 ns    213333333
BenchmarkPbrtoRotateFromToVector3f                   17.8 ns         17.6 ns     37333333
BenchmarkPbrtoRotateFromToOVector3f                  36.7 ns         36.9 ns     19478261
BenchmarkPbrtRotateFromToVector3f                    65.0 ns         64.2 ns     11200000
BenchmarkVector2MultipleAdds                         5.29 ns         5.16 ns    100000000
BenchmarkVector2MultipleXMVectorAdd                  4.53 ns         4.54 ns    161858065
BenchmarkVector2MultipleOperations                   4.92 ns         5.00 ns    100000000
BenchmarkPBRTVector2fMultipleOperations              7.44 ns         7.32 ns     74666667
BenchmarkMathFMA1                                    1.89 ns         1.88 ns    373333333
BenchmarkPbrtFMA1                                    2.25 ns         2.22 ns    344615385
BenchmarkMathFMA2                                    2.98 ns         3.00 ns    224000000
BenchmarkPbrtFMA2                                    3.09 ns         3.15 ns    213333333
BenchmarkMathFMA3                                    3.92 ns         3.92 ns    179200000
BenchmarkPbrtFMA3                                    3.64 ns         3.60 ns    186666667
BenchmarkMathQuaternionAdd                           3.99 ns         3.96 ns    165925926
BenchmarkPbrtQuaternionAdd                           4.40 ns         4.39 ns    160000000
BenchmarkMathPoint3Distance                          4.01 ns         4.01 ns    179200000
BenchmarkPbrtPoint3Distance                          4.19 ns         4.26 ns    172307692
BenchmarkMathPoint3DistanceSquared                   3.85 ns         3.90 ns    172307692
BenchmarkPbrtPoint3DistanceSquared                   3.65 ns         3.68 ns    203636364
BenchmarkMathVector3Cross                            2.43 ns         2.45 ns    248888889
BenchmarkMathPbrtVector3Cross                        2.69 ns         2.70 ns    248888889
BenchmarkMathVector4Cross                            2.88 ns         2.89 ns    248888889
BenchmarkMathVector3Dot                              3.61 ns         3.53 ns    203636364
BenchmarkPbrtVector3Dot                              3.08 ns         3.11 ns    235789474
BenchmarkMathVector3AngleBetween                     5.65 ns         5.58 ns    112000000
BenchmarkPbrtVector3AngleBetween                     7.64 ns         7.74 ns     74666667
BenchmarkXMVector3AngleBetweenVectors                11.9 ns         11.7 ns     56000000
BenchmarkMathVector3LengthSquared                    2.90 ns         2.85 ns    235789474
BenchmarkPbrtVector3LengthSquared                    2.54 ns         2.58 ns    224000000
BenchmarkMathVector3Length                           3.05 ns         3.08 ns    248888889
BenchmarkPbrtVector3Length                           3.31 ns         3.37 ns    213333333
BenchmarkMathVector3Ceil                             2.53 ns         2.55 ns    263529412
BenchmarkPbrtVector3Ceil                             3.00 ns         3.01 ns    248888889
BenchmarkMathVector3Floor                            2.66 ns         2.61 ns    263529412
BenchmarkPbrtVector3Floor                            2.48 ns         2.51 ns    280000000
BenchmarkMathVector3Trunc                            2.53 ns         2.51 ns    280000000
BenchmarkMathVector3Round                            2.51 ns         2.40 ns    280000000
BenchmarkMathVector3Lerp                             4.28 ns         4.24 ns    165925926
BenchmarkPbrtVector3Lerp                             4.08 ns         4.08 ns    172307692
BenchmarkMathVector3Clamp                            3.84 ns         3.81 ns    172307692
BenchmarkMathVector3Sqrt                             2.41 ns         2.35 ns    298666667
BenchmarkMathVector3Sin                              10.5 ns         10.5 ns     64000000
BenchmarkMathVector3Cos                              11.0 ns         11.0 ns     64000000
BenchmarkMathVector3Tan                              10.3 ns         10.3 ns     64000000
BenchmarkMathVector3ASin                             7.86 ns         7.74 ns     74666667
BenchmarkMathVector3ACos                             11.7 ns         11.7 ns     56000000
BenchmarkMathVector3ATan                             8.55 ns         8.54 ns     89600000
BenchmarkMathVector3ATan2                            19.1 ns         18.6 ns     34461538
BenchmarkMathVector3SinH                             14.1 ns         13.6 ns     44800000
BenchmarkMathVector3CosH                             12.6 ns         12.6 ns     49777778
BenchmarkMathVector3TanH                             13.6 ns         13.6 ns     44800000

</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Harlinn</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Harlinn</li><li><a class="u-email" href="mailto:espen@harlinn.no">espen@harlinn.no</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Harlinn"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Harlinn</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is my personal site. </p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
