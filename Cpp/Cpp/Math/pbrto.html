<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PBRTO a micro optimized raytracing app | Harlinn</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="PBRTO a micro optimized raytracing app" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is my personal Github site," />
<meta property="og:description" content="This is my personal Github site," />
<link rel="canonical" href="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:url" content="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:site_name" content="Harlinn" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PBRTO a micro optimized raytracing app" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"This is my personal Github site,","headline":"PBRTO a micro optimized raytracing app","url":"https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://harlinn.github.io/feed.xml" title="Harlinn" /><script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="importmap">
        {
            "imports":
            {
            "three": "https://cdn.jsdelivr.net/npm/three@0.171.0/build/three.module.min.js" ,
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.171.0/examples/jsm/"
            }
        }
    </script>
</head>
<body><header class="site-header" role="banner">
    <div id="animatedHeader" height="120px" width="100%">
        <script type="x-shader/x-vertex" id="vertexshader">
            attribute float scale;
            void main() {
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                gl_PointSize = scale * ( 100.0 / - mvPosition.z );
                gl_Position = projectionMatrix * mvPosition;
            }

        </script>

        <script type="x-shader/x-fragment" id="fragmentshader">
            uniform vec3 color;
            void main() {
                if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )  discard;
                gl_FragColor = vec4( color, 0.8 );
            }
        </script>

        <script type="module">

			import * as THREE from 'three';

			const SEPARATION = 100, AMOUNTX = 50, AMOUNTY = 50;

			let container; 
			let camera, scene, renderer;

			let particles, count = 0;

			let mouseX = 0, mouseY = 0;

			let animatedHeaderHeight = 120;

            let windowHalfX = window.innerWidth / 2;
            let windowHalfY = animatedHeaderHeight/2.0;

			init();

			function init() {

                container = document.querySelector('#animatedHeader');

                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000 );
				camera.position.z = 1000;

				scene = new THREE.Scene();

				//

				const numParticles = AMOUNTX * AMOUNTY;

				const positions = new Float32Array( numParticles * 3 );
				const scales = new Float32Array( numParticles );

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i ] = ix * SEPARATION - ( ( AMOUNTX * SEPARATION ) / 2 ); // x
						positions[ i + 1 ] = 0; // y
						positions[ i + 2 ] = iy * SEPARATION - ( ( AMOUNTY * SEPARATION ) / 2 ); // z

						scales[ j ] = 1;

						i += 3;
						j ++;

					}

				}

				const geometry = new THREE.BufferGeometry();
				geometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
				geometry.setAttribute( 'scale', new THREE.BufferAttribute( scales, 1 ) );

				const material = new THREE.ShaderMaterial( {

					uniforms: {
						color: { value: new THREE.Color( 0xffffff ) },
					},
					vertexShader: document.getElementById( 'vertexshader' ).textContent,
					fragmentShader: document.getElementById( 'fragmentshader' ).textContent

				} );

				//

				particles = new THREE.Points( geometry, material );
				scene.add( particles );

				//

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize(window.innerWidth, animatedHeaderHeight );
				renderer.setAnimationLoop( animate );
				container.appendChild( renderer.domElement );

				container.style.touchAction = 'none';
				container.addEventListener( 'pointermove', onPointerMove );

				//

                window.addEventListener( 'resize', onWindowResize );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;

				camera.aspect = window.innerWidth / animatedHeaderHeight; 
				camera.updateProjectionMatrix();

				renderer.setSize(window.innerWidth, animatedHeaderHeight);

			}

			//

			function onPointerMove( event ) {

				if ( event.isPrimary === false ) return;

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}

			//

			function animate() {
				render();

			}

			function render() {

				camera.position.x += ( mouseX - camera.position.x ) * .05;
				camera.position.y += ( - mouseY - camera.position.y ) * .05;
				camera.lookAt( scene.position );

				const positions = particles.geometry.attributes.position.array;
				const scales = particles.geometry.attributes.scale.array;

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i + 1 ] = ( Math.sin( ( ix + count ) * 0.3 ) * 50 ) +
										( Math.sin( ( iy + count ) * 0.5 ) * 50 );

						scales[ j ] = ( Math.sin( ( ix + count ) * 0.3 ) + 1 ) * 20 +
										( Math.sin( ( iy + count ) * 0.5 ) + 1 ) * 20;

						i += 3;
						j ++;

					}

				}

				particles.geometry.attributes.position.needsUpdate = true;
				particles.geometry.attributes.scale.needsUpdate = true;

				renderer.render( scene, camera );

				count += 0.1;

			}

        </script>

    </div>
  <div class="wrapper"><a class="site-title" rel="author" href="/">Harlinn</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Cpp/Cpp.html">C++</a><a class="page-link" href="/Databases/Databases.html">Databases</a><a class="page-link" href="/DotNet/DotNet.html">.Net</a><a class="page-link" href="/Java/Java.html">Java</a><a class="page-link" href="/Julia/Julia.html">Julia</a><a class="page-link" href="/Python/Python.html">Python</a><a class="page-link" href="/R/R.html">R</a><a class="page-link" href="/Rust/Rust.html">Rust</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">PBRTO a micro optimized raytracing app</h1>
  </header>

  <div class="post-content">
    <p>PBRTO is a micro optimized version of <a href="https://github.com/mmp/pbrt-v4">PBRT-v4</a>, under development 
as an example of how the functionality in <code class="language-plaintext highlighter-rouge">HCCMath.h</code>, <code class="language-plaintext highlighter-rouge">HCCSIMD.h</code> and <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code> can be used to 
optimize the performance of real, computationally intensive, apps. It’s now about <code class="language-plaintext highlighter-rouge">35</code> % 
faster than the release build of the original PBRT.</p>

<p>PBRT is a well written piece of software, with a code base that is, 
for such a complex undertaking, easy to understand and modify.</p>

<p>The original, unmodified version, performs very well and it’s simple to integrate with <a href="https://www.blender.org/">blender</a>, 
using <a href="https://github.com/NicNel/bpbrt4">pbrt-v4 render engine/exporter add-on for Blender</a>.</p>

<p>Most of the solution is contained within the <a href="https://github.com/Harlinn/Harlinn.Windows/tree/master/Examples/Core/Math/Harlinn.pbrto">Harlinn.pbrto</a>
project. This project builds PBRT at a dynamic link library, which makes it easy to create benchmarks
for the original PBRT code,</p>

<p>PBRT has its own set of optimized mathematical functions, and it’s only when we 
start comparing the vector and matrix operations, that it becomes clear that
really significant performance improvements are possible.</p>

<p>Matrix addition can be improved by <code class="language-plaintext highlighter-rouge">330</code> %, matrix multiplication by
<code class="language-plaintext highlighter-rouge">1000</code> %, matrix determinant by <code class="language-plaintext highlighter-rouge">450</code> %, and the matrix inverse by <code class="language-plaintext highlighter-rouge">690</code> %:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-----------------------------------------------------------------------------------------
Benchmark                                               Time             CPU   Iterations
-----------------------------------------------------------------------------------------
BenchmarkDoubleGenerator                             1.56 ns         1.40 ns    560000000
BenchmarkFloatGenerator                              1.96 ns         1.61 ns    407272727
BenchmarkDoubleIsSameValue                           2.01 ns         1.70 ns    497777778
BenchmarkFloatIsSameValue                            1.53 ns         1.22 ns    640000000
BenchmarkDoubleIsZero                                1.37 ns         1.12 ns    560000000
BenchmarkFloatIsZero                                 2.23 ns         1.32 ns    497777778
BenchmarkDoubleIsNaN                                 1.63 ns         1.32 ns    640000000
BenchmarkDoubleStdIsNaN                              1.65 ns         1.42 ns    640000000
BenchmarkDoublePbrtoIsNaN                            1.49 ns         1.34 ns    560000000
BenchmarkFloatIsNaN                                  1.66 ns         1.44 ns    497777778
BenchmarkFloatStdIsNaN                               1.72 ns         1.50 ns    448000000
BenchmarkFloatPbrtoIsNaN                             1.70 ns         1.38 ns    407272727
BenchmarkDoubleSignum                                2.36 ns         1.77 ns    344615385
BenchmarkDoubleNaiveSignum                           2.04 ns         1.57 ns    448000000
BenchmarkFloatSignum                                 2.56 ns         1.80 ns    373333333
BenchmarkFloatNaiveSignum                            1.94 ns         1.53 ns    407272727
BenchmarkDoubleDeg2Rad                               1.41 ns         1.22 ns    640000000
BenchmarkDoublePbrtRadians                           1.64 ns         1.37 ns    560000000
BenchmarkFloatDeg2Rad                                1.30 ns         1.10 ns    640000000
BenchmarkFloatPbrtRadians                            1.47 ns         1.13 ns    497777778
BenchmarkDoubleRad2Deg                               1.72 ns         1.51 ns    640000000
BenchmarkDoublePbrtDegrees                           1.56 ns         1.22 ns    497777778
BenchmarkFloatRad2Deg                                1.73 ns         1.50 ns    448000000
BenchmarkFloatPbrtDegrees                            1.43 ns         1.17 ns    640000000
BenchmarkDoubleNextAfter                             6.83 ns         6.00 ns    112000000
BenchmarkDoubleStdNextAfter                          11.2 ns         8.58 ns     74666667
BenchmarkFloatNextAfter                              6.59 ns         5.16 ns    100000000
BenchmarkFloatStdNextAfter                           11.8 ns         8.37 ns     74666667
BenchmarkDoubleInternalSqrt                          28.9 ns         20.1 ns     28000000
BenchmarkDoubleSqrt                                  2.07 ns         1.53 ns    560000000
BenchmarkDoubleStdSqrt                               26.7 ns         19.0 ns     28000000
BenchmarkDoublePbrtSqrt                              26.5 ns         22.6 ns     40727273
BenchmarkFloatInternalSqrt                           12.1 ns         10.9 ns     74666667
BenchmarkFloatSqrt                                   1.63 ns         1.35 ns    497777778
BenchmarkFloatStdSqrt                                24.2 ns         18.8 ns     37333333
BenchmarkFloatPbrtSqrt                               24.4 ns         21.3 ns     37333333
BenchmarkDoubleNextDown                              2.54 ns         1.95 ns    344615385
BenchmarkDoubleStdNextDown                           10.9 ns         9.24 ns     89600000
BenchmarkFloatNextDown                               2.23 ns         1.99 ns    344615385
BenchmarkFloatStdNextDown                            12.0 ns         9.63 ns     74666667
BenchmarkFloatPbrtNextFloatDown                      2.98 ns         2.34 ns    280000000
BenchmarkDoubleNextUp                                2.54 ns         1.86 ns    344615385
BenchmarkDoubleStdNextUp                             11.2 ns         10.2 ns    100000000
BenchmarkFloatNextUp                                 2.58 ns         2.01 ns    280000000
BenchmarkFloatStdNextUp                              12.7 ns         10.0 ns     56000000
BenchmarkFloatPbrtNextFloatUp                        3.06 ns         2.56 ns    298666667
BenchmarkDoubleIsInf                                 1.71 ns         1.35 ns    497777778
BenchmarkDoubleStdIsInf                              1.75 ns         1.44 ns    497777778
BenchmarkFloatIsInf                                  1.46 ns         1.29 ns    448000000
BenchmarkFloatStdIsInf                               1.76 ns         1.32 ns    497777778
BenchmarkFloatPbrtIsInf                              1.62 ns         1.37 ns    640000000
BenchmarkDoubleInternalAbs                           1.86 ns         1.56 ns    640000000
BenchmarkDoubleAbs                                   1.77 ns         1.46 ns    448000000
BenchmarkDoubleStdAbs                                1.60 ns         1.24 ns    896000000
BenchmarkDoublePbrtAbs                               1.72 ns         1.40 ns    560000000
BenchmarkFloatInternalAbs                            1.94 ns         1.53 ns    448000000
BenchmarkFloatAbs                                    1.62 ns         1.30 ns   1000000000
BenchmarkFloatStdAbs                                 1.58 ns         1.26 ns    746666667
BenchmarkFloatPbrtAbs                                1.58 ns         1.48 ns    560000000
BenchmarkDoubleSignBit                               1.57 ns         1.42 ns    407272727
BenchmarkDoubleStdSignBit                            2.80 ns         2.18 ns    280000000
BenchmarkFloatSignBit                                1.86 ns         1.60 ns    448000000
BenchmarkFloatStdSignBit                             2.72 ns         2.64 ns    248888889
BenchmarkDoubleFRExp                                 2.81 ns         2.06 ns    280000000
BenchmarkDoubleStdFRExp                              17.8 ns         15.7 ns     49777778
BenchmarkFloatFRExp                                  2.57 ns         2.20 ns    298666667
BenchmarkFloatStdFRExp                               18.3 ns         16.9 ns     40727273
BenchmarkDoubleModF                                  3.57 ns         2.86 ns    224000000
BenchmarkDoubleStdModF                               5.48 ns         4.71 ns    165925926
BenchmarkFloatModF                                   3.41 ns         3.01 ns    248888889
BenchmarkFloatStdModF                                4.82 ns         3.71 ns    160000000
BenchmarkDoubleMin                                   1.53 ns         1.32 ns    497777778
BenchmarkDoubleStdMin                                2.16 ns         1.84 ns    373333333
BenchmarkFloatMin                                    1.73 ns         1.37 ns    560000000
BenchmarkFloatStdMin                                 2.56 ns         1.95 ns    320000000
BenchmarkDoubleMax                                   2.29 ns         2.06 ns    448000000
BenchmarkDoubleStdMax                                1.80 ns         1.40 ns    448000000
BenchmarkFloatMax                                    1.59 ns         1.34 ns    560000000
BenchmarkFloatStdMax                                 1.76 ns         1.51 ns    560000000
BenchmarkDoubleTrunc                                 1.97 ns         1.53 ns    560000000
BenchmarkDoubleStdTrunc                              8.04 ns         6.10 ns     89600000
BenchmarkFloatTrunc                                  1.78 ns         1.46 ns    373333333
BenchmarkFloatStdTrunc                               1.82 ns         1.46 ns    373333333
BenchmarkDoubleFloor                                 1.54 ns         1.26 ns    560000000
BenchmarkDoubleStdFloor                              1.59 ns         1.31 ns    896000000
BenchmarkFloatFloor                                  1.62 ns         1.29 ns    497777778
BenchmarkFloatStdFloor                               1.53 ns         1.23 ns    407272727
BenchmarkDoubleCeil                                  1.67 ns         1.33 ns    539526881
BenchmarkDoubleStdCeil                               1.64 ns         1.29 ns    497777778
BenchmarkFloatCeil                                   1.58 ns         1.29 ns    497777778
BenchmarkFloatStdCeil                                1.70 ns         1.38 ns    407272727
BenchmarkDoubleRound                                 1.69 ns         1.34 ns    373333333
BenchmarkDoubleStdRound                              11.3 ns         10.3 ns     64000000
BenchmarkFloatRound                                  2.56 ns         1.96 ns    407272727
BenchmarkFloatStdRound                               2.17 ns         1.88 ns    448000000
BenchmarkDoubleClamp                                 3.03 ns         2.46 ns    280000000
BenchmarkDoubleStdClamp                              2.01 ns         1.69 ns    407272727
BenchmarkFloatClamp                                  3.04 ns         2.43 ns    373333333
BenchmarkFloatStdClamp                               2.11 ns         1.76 ns    373333333
BenchmarkFloatPbrtClamp                              3.26 ns         2.91 ns    263529412
BenchmarkDoubleInternalLerpImpl                      2.75 ns         2.27 ns    344615385
BenchmarkDoubleLerp                                  9.13 ns         6.14 ns    112000000
BenchmarkDoubleStdLerp                               8.36 ns         6.25 ns    100000000
BenchmarkFloatLerp                                   8.66 ns         7.74 ns     74666667
BenchmarkFloatInternalLerpImpl                       2.92 ns         2.49 ns    320000000
BenchmarkFloatStdLerp                                8.79 ns         8.28 ns    100000000
BenchmarkFloatPbrtLerp                               1.78 ns         1.42 ns    407272727
BenchmarkDoubleCopySign                              1.91 ns         1.40 ns    448000000
BenchmarkDoubleStdCopySign                           5.84 ns         4.74 ns    112000000
BenchmarkDoublePbrtCopySign                          6.16 ns         4.45 ns    154482759
BenchmarkFloatCopySign                               1.78 ns         1.38 ns    497777778
BenchmarkFloatStdCopySign                            1.75 ns         1.63 ns    557511111
BenchmarkFloatPbrtCopySign                           1.76 ns         1.54 ns    497777778
BenchmarkDoubleScaleByN                              3.97 ns         3.22 ns    213333333
BenchmarkDoubleStdScaleByN                           9.22 ns         8.02 ns     89600000
BenchmarkFloatScaleByN                               3.48 ns         2.88 ns    298666667
BenchmarkFloatStdScaleByN                            9.81 ns         7.67 ns     89600000
BenchmarkDoubleFMod                                  10.1 ns         8.12 ns    100000000
BenchmarkDoubleStdFMod                               9.26 ns         7.67 ns    112000000
BenchmarkFloatFMod                                   11.2 ns         8.72 ns     89600000
BenchmarkFloatStdFMod                                11.3 ns         9.22 ns    100000000
BenchmarkFloatPbrtFMod                               12.2 ns         8.58 ns     74666667
BenchmarkDoubleInternalExpImpl                       5.94 ns         4.88 ns    160000000
BenchmarkDoubleExp                                   5.79 ns         5.16 ns    100000000
BenchmarkDoubleStdExp                                49.7 ns         41.9 ns     17920000
BenchmarkFloatInternalExpImpl                        5.09 ns         3.90 ns    172307692
BenchmarkFloatExp                                    5.32 ns         4.35 ns    172307692
BenchmarkFloatStdExp                                 50.4 ns         42.7 ns     18666667
BenchmarkFloatPbrtFastExp                            3.01 ns         2.61 ns    263529412
BenchmarkDoubleInternalHypot                         6.65 ns         5.47 ns    100000000
BenchmarkDoubleHypot                                 1.91 ns         1.57 ns    497777778
BenchmarkDoubleStdHypot                              7.20 ns         5.78 ns    100000000
BenchmarkFloatInternalHypot                          5.78 ns         4.29 ns    149333333
BenchmarkFloatHypot                                  2.05 ns         1.53 ns    448000000
BenchmarkFloatStdHypot                               7.09 ns         5.84 ns    144516129
BenchmarkDoubleHypot3                                3.22 ns         2.79 ns    263529412
BenchmarkDoubleStdHypot3                             8.41 ns         6.98 ns    112000000
BenchmarkFloatHypot3                                 2.28 ns         1.50 ns    407272727
BenchmarkFloatStdHypot3                              7.62 ns         6.28 ns     89600000
BenchmarkDoubleInternalLog                           7.24 ns         6.14 ns    112000000
BenchmarkDoubleLog                                   7.00 ns         6.00 ns    112000000
BenchmarkDoubleStdLog                                30.4 ns         22.9 ns     28000000
BenchmarkFloatInternalLog                            5.61 ns         4.54 ns    161858065
BenchmarkFloatLog                                    5.67 ns         5.31 ns    100000000
BenchmarkFloatStdLog                                 27.1 ns         21.9 ns     26352941
BenchmarkDoubleInternalLog2                          8.02 ns         7.11 ns     74666667
BenchmarkDoubleLog2                                  7.82 ns         6.84 ns    112000000
BenchmarkDoubleStdLog2                               32.8 ns         27.0 ns     24888889
BenchmarkFloatInternalLog2                           6.50 ns         4.87 ns    144516129
BenchmarkFloatLog2                                   6.45 ns         5.42 ns    167253333
BenchmarkFloatStdLog2                                32.7 ns         31.2 ns     28000000
BenchmarkDoubleInternalLog10                         8.71 ns         6.80 ns     89600000
BenchmarkDoubleLog10                                 8.35 ns         6.84 ns    112000000
BenchmarkDoubleStdLog10                              33.9 ns         24.6 ns     28000000
BenchmarkFloatInternalLog10                          6.89 ns         6.14 ns    112000000
BenchmarkFloatLog10                                  7.32 ns         5.75 ns     89600000
BenchmarkFloatStdLog10                               32.0 ns         26.7 ns     29866667
BenchmarkDoubleInternalSin                           10.5 ns         8.59 ns    100000000
BenchmarkDoubleSin                                   7.71 ns         6.70 ns    112000000
BenchmarkDoubleStdSin                                7.68 ns         6.70 ns    112000000
BenchmarkFloatInternalSin                            4.98 ns         4.44 ns    172307692
BenchmarkFloatSin                                    4.63 ns         4.07 ns    203636364
BenchmarkFloatStdSin                                 7.93 ns         6.72 ns    100000000
BenchmarkDoubleInternalCos                           9.63 ns         7.81 ns    100000000
BenchmarkDoubleCos                                   7.86 ns         6.56 ns    112000000
BenchmarkDoubleStdCos                                7.84 ns         5.71 ns    128656411
BenchmarkFloatInternalCos                            4.70 ns         3.68 ns    203636364
BenchmarkFloatCos                                    4.55 ns         3.52 ns    160000000
BenchmarkFloatStdCos                                 8.25 ns         6.28 ns     89600000
BenchmarkDoubleInternalTan                           16.6 ns         13.8 ns     49777778
BenchmarkDoubleTan                                   12.0 ns         10.5 ns     64000000
BenchmarkDoubleStdTan                                12.1 ns         10.7 ns     74666667
BenchmarkFloatInternalTan                            5.49 ns         4.46 ns    112000000
BenchmarkFloatTan                                    5.84 ns         4.88 ns    112000000
BenchmarkFloatStdTan                                 9.07 ns         6.84 ns    112000000
BenchmarkDoubleInternalATan                          7.56 ns         6.88 ns    100000000
BenchmarkDoubleATan                                  7.53 ns         5.47 ns    100000000
BenchmarkDoubleStdATan                               8.44 ns         7.32 ns     89600000
BenchmarkFloatInternalATan                           5.39 ns         4.54 ns    144516129
BenchmarkFloatATan                                   5.73 ns         5.16 ns    112000000
BenchmarkFloatStdATan                                6.86 ns         5.84 ns    144516129
BenchmarkDoubleInternalASin                          7.90 ns         6.56 ns    112000000
BenchmarkDoubleASin                                  9.10 ns         6.98 ns     89600000
BenchmarkDoubleStdASin                               11.3 ns         9.72 ns     83626667
BenchmarkFloatInternalASin                           5.32 ns         4.74 ns    112000000
BenchmarkFloatASin                                   5.58 ns         5.16 ns    100000000
BenchmarkFloatStdASin                                7.63 ns         6.45 ns     89600000
BenchmarkDoubleInternalACos                          7.00 ns         6.50 ns    115347127
BenchmarkDoubleACos                                  7.00 ns         6.28 ns    112000000
BenchmarkDoubleStdACos                               9.58 ns         8.28 ns    100000000
BenchmarkFloatInternalACos                           5.35 ns         5.00 ns    100000000
BenchmarkFloatACos                                   5.18 ns         4.65 ns    144516129
BenchmarkFloatStdACos                                8.36 ns         6.10 ns     89600000
BenchmarkDoubleInternalATan2                         12.9 ns         10.5 ns     64000000
BenchmarkDoubleATan2                                 13.2 ns         11.9 ns     49777778
BenchmarkDoubleStdATan2                              19.1 ns         15.0 ns     44800000
BenchmarkFloatInternalATan2                          9.04 ns         7.50 ns     89600000
BenchmarkFloatATan2                                  8.96 ns         7.34 ns    100000000
BenchmarkFloatStdATan2                               14.8 ns         12.7 ns     64000000
BenchmarkFloatFMA                                    1.43 ns         1.32 ns    497777778
BenchmarkPbrtFloatFMA                                1.50 ns         1.34 ns    640000000
BenchmarkFloatSinXOverX                              5.12 ns         3.99 ns    172307692
BenchmarkPbrtFloatSinXOverX                          6.72 ns         5.67 ns    129486452
BenchmarkFloatExpM1                                  17.0 ns         12.6 ns     56000000
BenchmarkFloatSinc                                   5.96 ns         5.06 ns    154482759
BenchmarkPbrtFloatSinc                               8.63 ns         7.85 ns    111502223
BenchmarkFloatMod                                    8.55 ns         6.80 ns     89600000
BenchmarkPbrtFloatMod                                7.84 ns         7.53 ns    112000000
BenchmarkFloatSmoothStep                             2.59 ns         2.23 ns    280000000
BenchmarkPbrtFloatSmoothStep                         2.75 ns         2.15 ns    320000000
BenchmarkFloatSafeSqrt                               1.50 ns         1.12 ns    560000000
BenchmarkPbrtFloatSafeSqrt                           2.25 ns         1.57 ns    448000000
BenchmarkFloatSqr                                    1.45 ns         1.17 ns    560000000
BenchmarkPbrtFloatSqr                                1.47 ns         1.26 ns    560000000
BenchmarkFloatSafeASin                               7.80 ns         6.88 ns    100000000
BenchmarkPbrtFloatSafeASin                           9.02 ns         7.85 ns     89600000
BenchmarkFloatSafeACos                               5.13 ns         4.05 ns    154482759
BenchmarkPbrtFloatSafeACos                           8.27 ns         7.66 ns    100000000
BenchmarkFloatNextFloatUp                            2.68 ns         2.47 ns    373333333
BenchmarkPbrtFloatNextFloatUp                        3.88 ns         3.20 ns    248888889
BenchmarkFloatNextFloatDown                          2.52 ns         1.95 ns    448000000
BenchmarkPbrtFloatNextFloatDown                      2.80 ns         2.39 ns    248888889
BenchmarkFloatAddRoundUp                             3.09 ns         2.73 ns    280000000
BenchmarkPbrtFloatAddRoundUp                         3.26 ns         2.78 ns    235789474
BenchmarkFloatAddRoundDown                           2.89 ns         2.44 ns    320000000
BenchmarkPbrtFloatAddRoundDown                       2.83 ns         2.12 ns    280000000
BenchmarkFloatSubRoundUp                             3.21 ns         2.79 ns    280000000
BenchmarkPbrtFloatSubRoundUp                         4.00 ns         3.77 ns    186666667
BenchmarkFloatSubRoundDown                           2.69 ns         2.22 ns    373333333
BenchmarkPbrtFloatSubRoundDown                       3.44 ns         3.00 ns    213333333
BenchmarkFloatMulRoundUp                             2.88 ns         2.39 ns    373333333
BenchmarkPbrtFloatMulRoundUp                         2.88 ns         2.64 ns    213333333
BenchmarkFloatMulRoundDown                           2.78 ns         2.40 ns    344615385
BenchmarkPbrtFloatMulRoundDown                       2.70 ns         2.45 ns    344615385
BenchmarkFloatDivRoundUp                             2.68 ns         2.06 ns    448000000
BenchmarkPbrtFloatDivRoundUp                         3.71 ns         3.07 ns    280000000
BenchmarkFloatDivRoundDown                           2.75 ns         2.34 ns    280000000
BenchmarkPbrtFloatDivRoundDown                       3.79 ns         3.12 ns    280000000
BenchmarkFloatSqrtRoundUp                            2.85 ns         2.31 ns    263529412
BenchmarkPbrtFloatSqrtRoundUp                        27.2 ns         22.9 ns     28000000
BenchmarkFloatSqrtRoundDown                          2.72 ns         2.35 ns    298666667
BenchmarkPbrtFloatSqrtRoundDown                      27.5 ns         27.1 ns     38084250
BenchmarkFloatFMARoundUp                             4.04 ns         3.67 ns    165925926
BenchmarkPbrtFloatFMARoundUp                         3.29 ns         2.67 ns    228072727
BenchmarkFloatFMARoundDown                           2.84 ns         2.45 ns    344615385
BenchmarkPbrtFloatFMARoundDown                       3.72 ns         3.24 ns    298666667
BenchmarkFloatFastLog2                               7.26 ns         6.98 ns    112000000
BenchmarkPbrtFloatLog2                               6.13 ns         4.74 ns    112000000
BenchmarkFloatLog2Int                                3.42 ns         2.52 ns    235789474
BenchmarkPbrtFloatLog2Int                            3.57 ns         3.07 ns    280000000
BenchmarkFloatGaussian                               5.98 ns         5.72 ns    112000000
BenchmarkPbrtFloatGaussian                           6.38 ns         5.30 ns    112000000
BenchmarkFloatLogistic                               11.2 ns         9.77 ns     64000000
BenchmarkPbrtFloatLogistic                           12.0 ns         9.03 ns     64000000
BenchmarkFloatDifferenceOfProducts                   2.68 ns         2.14 ns    298666667
BenchmarkPbrtFloatDifferenceOfProducts               2.75 ns         2.49 ns    263529412
BenchmarkFloatSumOfProducts                          2.76 ns         2.20 ns    298666667
BenchmarkPbrtFloatSumOfProducts                      2.75 ns         2.64 ns    248888889
BenchmarkFloatQuadratic                              3.15 ns         2.89 ns    248888889
BenchmarkFloatPbrtQuadratic                          2.77 ns         2.20 ns    298666667
BenchmarkFloatIntervalMultiply                       11.8 ns         9.84 ns    100000000
BenchmarkPbrtFloatIntervalMultiply                   46.2 ns         43.5 ns     17230769
BenchmarkFloatIntervalDivide                         15.7 ns         14.6 ns     64000000
BenchmarkPbrtFloatIntervalDivide                     44.9 ns         38.4 ns     20363636
BenchmarkFloatIntervalScalarMultiply                 5.07 ns         4.55 ns    154482759
BenchmarkPbrtFloatIntervalScalarMultiply             5.61 ns         5.08 ns    144516129
BenchmarkFloatIntervalScalarDivision                 6.18 ns         5.62 ns    100000000
BenchmarkPbrtFloatIntervalScalarDivision             6.26 ns         5.47 ns    100000000
BenchmarkFloatIntervalAddition                       4.08 ns         3.12 ns    160000000
BenchmarkPbrtFloatIntervalAddition                   5.93 ns         5.58 ns     89600000
BenchmarkFloatIntervalSubtraction                    4.09 ns         3.57 ns    179200000
BenchmarkPbrtFloatIntervalSubtraction                5.82 ns         5.78 ns    100000000
BenchmarkFloatIntervalScalarAddition                 4.77 ns         4.08 ns    172307692
BenchmarkPbrtFloatIntervalScalarAddition             7.36 ns         5.16 ns    100000000
BenchmarkFloatIntervalScalarSubtraction              5.10 ns         4.69 ns    186666667
BenchmarkPbrtFloatIntervalScalarSubtraction          7.34 ns         6.98 ns     89600000
BenchmarkFloatIntervalSqrt                           4.44 ns         3.81 ns    160000000
BenchmarkPbrtFloatIntervalSqrt                       8.13 ns         7.11 ns    112000000
BenchmarkFloatIntervalFMA                            14.7 ns         14.3 ns     44800000
BenchmarkPbrtFloatIntervalFMA                        47.2 ns         46.9 ns     18666667
BenchmarkFloatIntervalDifferenceOfProducts           21.5 ns         18.2 ns     49777778
BenchmarkPbrtFloatIntervalDifferenceOfProducts       83.2 ns         69.8 ns      8960000
BenchmarkFloatIntervalSumOfProducts                  20.5 ns         17.3 ns     49777778
BenchmarkPbrtFloatIntervalSumOfProducts              84.8 ns         82.0 ns      8960000
BenchmarkFloatIntervalQuadratic                      29.6 ns         26.7 ns     26352941
BenchmarkPbrtFloatIntervalQuadratic                  90.2 ns         85.4 ns      8960000
BenchmarkFloatIntervalACos                           12.6 ns         10.5 ns     89600000
BenchmarkPbrtFloatIntervalACos                       22.6 ns         17.2 ns     37333333
BenchmarkFloatIntervalCos                            15.7 ns         13.4 ns     56000000
BenchmarkPbrtFloatIntervalCos                        22.5 ns         18.1 ns     34461538
BenchmarkFloatIntervalSin                            13.2 ns         12.9 ns     49777778
BenchmarkPbrtFloatIntervalSin                        23.8 ns         20.9 ns     29866667
BenchmarkPbrtSquareMatrixAdd                         11.3 ns         9.59 ns     89600000
BenchmarkSquareMatrixAdd                             2.45 ns         1.83 ns    298666667
BenchmarkSquareMatrixSub                             2.38 ns         1.93 ns    373333333
BenchmarkPbrtSquareMatrixScalarMultiply              4.03 ns         3.21 ns    224000000
BenchmarkSquareMatrixScalarMultiply                  1.93 ns         1.59 ns    344615385
BenchmarkPbrtSquareMatrixMultiply                    30.5 ns         24.9 ns     26352941
BenchmarkSquareMatrixMultiply                        5.19 ns         3.61 ns    160000000
BenchmarkPbrtSquareMatrixDeterminant                 15.5 ns         12.7 ns     40727273
BenchmarkXMMatrixDeterminant                         3.04 ns         2.76 ns    248888889
BenchmarkSquareMatrixDeterminant                     3.17 ns         2.45 ns    235789474
BenchmarkPbrtSquareMatrixInverse                      146 ns          126 ns      4977778
BenchmarkXMMatrixInverse                             15.7 ns         12.6 ns     49777778
BenchmarkSquareMatrixInverse                         16.4 ns         14.6 ns     37333333
BenchmarkVector2MultipleAdds                         4.47 ns         3.30 ns    213333333
BenchmarkVector2MultipleXMVectorAdd                  4.40 ns         3.53 ns    194782609
BenchmarkVector2MultipleOperations                   4.53 ns         3.86 ns    165925926
BenchmarkPBRTVector2fMultipleOperations              7.14 ns         5.94 ns    100000000
BenchmarkMathFMA1                                    2.02 ns         1.76 ns    320000000
BenchmarkPbrtFMA1                                    2.00 ns         1.73 ns    407272727
BenchmarkMathFMA2                                    3.02 ns         2.25 ns    235789474
BenchmarkPbrtFMA2                                    2.92 ns         2.20 ns    298666667
BenchmarkMathFMA3                                    3.93 ns         3.84 ns    179200000
BenchmarkPbrtFMA3                                    3.83 ns         2.58 ns    235789474
BenchmarkMathQuaternionAdd                           4.04 ns         3.45 ns    194782609
BenchmarkPbrtQuaternionAdd                           3.85 ns         3.54 ns    172307692
BenchmarkMathPoint3Distance                          4.05 ns         3.85 ns    186666667
BenchmarkPbrtPoint3Distance                          3.84 ns         3.57 ns    179200000
BenchmarkMathPoint3DistanceSquared                   3.85 ns         3.38 ns    203636364
BenchmarkPbrtPoint3DistanceSquared                   3.44 ns         2.83 ns    248888889
BenchmarkMathVector3Cross                            2.66 ns         2.49 ns    320000000
BenchmarkMathPbrtVector3Cross                        3.16 ns         2.92 ns    235789474
BenchmarkMathVector4Cross                            2.78 ns         2.40 ns    344615385
BenchmarkMathVector3Dot                              3.42 ns         2.65 ns    235789474
BenchmarkPbrtVector3Dot                              2.99 ns         2.51 ns    248888889
BenchmarkMathVector3AngleBetween                     6.22 ns         4.50 ns    149333333
BenchmarkPbrtVector3AngleBetween                     12.1 ns         10.3 ns     56000000
BenchmarkXMVector3AngleBetweenVectors                11.9 ns         10.5 ns     74666667
BenchmarkMathVector3LengthSquared                    2.68 ns         2.18 ns    344615385
BenchmarkPbrtVector3LengthSquared                    2.57 ns         2.25 ns    320000000
BenchmarkMathVector3Length                           3.01 ns         2.67 ns    298666667
BenchmarkPbrtVector3Length                           3.16 ns         2.61 ns    263529412
BenchmarkMathVector3Ceil                             2.63 ns         2.18 ns    373333333
BenchmarkPbrtVector3Ceil                             3.14 ns         2.79 ns    280000000
BenchmarkMathVector3Floor                            2.80 ns         2.07 ns    407272727
BenchmarkPbrtVector3Floor                            2.68 ns         2.12 ns    280000000
BenchmarkMathVector3Trunc                            2.51 ns         1.77 ns    344615385
BenchmarkMathVector3Round                            2.50 ns         2.00 ns    320000000
BenchmarkMathVector3Lerp                             3.97 ns         3.08 ns    172307692
BenchmarkPbrtVector3Lerp                             3.91 ns         3.31 ns    179200000
BenchmarkMathVector3Clamp                            3.67 ns         3.70 ns    224000000
BenchmarkMathVector3Sqrt                             2.69 ns         2.36 ns    344615385
BenchmarkMathVector3Sin                              10.5 ns         8.58 ns     74666667
BenchmarkMathVector3Cos                              10.7 ns         9.59 ns     89600000
BenchmarkMathVector3Tan                              10.9 ns         9.52 ns     64000000
BenchmarkMathVector3ASin                             8.07 ns         7.15 ns     89600000
BenchmarkMathVector3ACos                             8.41 ns         6.84 ns    112000000
BenchmarkMathVector3ATan                             8.00 ns         6.80 ns     89600000
BenchmarkMathVector3ATan2                            17.8 ns         13.3 ns     44800000
BenchmarkMathVector3SinH                             13.6 ns         12.2 ns     64000000
BenchmarkMathVector3CosH                             13.0 ns         10.0 ns     74666667
BenchmarkMathVector3TanH                             13.2 ns         11.2 ns     64000000
</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Harlinn</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Harlinn</li><li><a class="u-email" href="mailto:espen@harlinn.no">espen@harlinn.no</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Harlinn"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Harlinn</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is my personal Github site, </p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
