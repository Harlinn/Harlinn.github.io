<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PBRTO a micro optimized raytracing app | Harlinn</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="PBRTO a micro optimized raytracing app" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is my personal Github site," />
<meta property="og:description" content="This is my personal Github site," />
<link rel="canonical" href="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:url" content="https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html" />
<meta property="og:site_name" content="Harlinn" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PBRTO a micro optimized raytracing app" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"This is my personal Github site,","headline":"PBRTO a micro optimized raytracing app","url":"https://harlinn.github.io/Cpp/Cpp/Math/pbrto.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://harlinn.github.io/feed.xml" title="Harlinn" /><script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="importmap">
        {
            "imports":
            {
            "three": "https://cdn.jsdelivr.net/npm/three@0.171.0/build/three.module.min.js" ,
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.171.0/examples/jsm/"
            }
        }
    </script>
</head>
<body><header class="site-header" role="banner">
    <div id="animatedHeader" height="120px" width="100%">
        <script type="x-shader/x-vertex" id="vertexshader">
            attribute float scale;
            void main() {
                vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
                gl_PointSize = scale * ( 100.0 / - mvPosition.z );
                gl_Position = projectionMatrix * mvPosition;
            }

        </script>

        <script type="x-shader/x-fragment" id="fragmentshader">
            uniform vec3 color;
            void main() {
                if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 )  discard;
                gl_FragColor = vec4( color, 0.8 );
            }
        </script>

        <script type="module">

			import * as THREE from 'three';

			const SEPARATION = 100, AMOUNTX = 50, AMOUNTY = 50;

			let container; 
			let camera, scene, renderer;

			let particles, count = 0;

			let mouseX = 0, mouseY = 0;

			let animatedHeaderHeight = 120;

            let windowHalfX = window.innerWidth / 2;
            let windowHalfY = animatedHeaderHeight/2.0;

			init();

			function init() {

                container = document.querySelector('#animatedHeader');

                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000 );
				camera.position.z = 1000;

				scene = new THREE.Scene();

				//

				const numParticles = AMOUNTX * AMOUNTY;

				const positions = new Float32Array( numParticles * 3 );
				const scales = new Float32Array( numParticles );

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i ] = ix * SEPARATION - ( ( AMOUNTX * SEPARATION ) / 2 ); // x
						positions[ i + 1 ] = 0; // y
						positions[ i + 2 ] = iy * SEPARATION - ( ( AMOUNTY * SEPARATION ) / 2 ); // z

						scales[ j ] = 1;

						i += 3;
						j ++;

					}

				}

				const geometry = new THREE.BufferGeometry();
				geometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );
				geometry.setAttribute( 'scale', new THREE.BufferAttribute( scales, 1 ) );

				const material = new THREE.ShaderMaterial( {

					uniforms: {
						color: { value: new THREE.Color( 0xffffff ) },
					},
					vertexShader: document.getElementById( 'vertexshader' ).textContent,
					fragmentShader: document.getElementById( 'fragmentshader' ).textContent

				} );

				//

				particles = new THREE.Points( geometry, material );
				scene.add( particles );

				//

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize(window.innerWidth, animatedHeaderHeight );
				renderer.setAnimationLoop( animate );
				container.appendChild( renderer.domElement );

				container.style.touchAction = 'none';
				container.addEventListener( 'pointermove', onPointerMove );

				//

                window.addEventListener( 'resize', onWindowResize );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;

				camera.aspect = window.innerWidth / animatedHeaderHeight; 
				camera.updateProjectionMatrix();

				renderer.setSize(window.innerWidth, animatedHeaderHeight);

			}

			//

			function onPointerMove( event ) {

				if ( event.isPrimary === false ) return;

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}

			//

			function animate() {
				render();

			}

			function render() {

				camera.position.x += ( mouseX - camera.position.x ) * .05;
				camera.position.y += ( - mouseY - camera.position.y ) * .05;
				camera.lookAt( scene.position );

				const positions = particles.geometry.attributes.position.array;
				const scales = particles.geometry.attributes.scale.array;

				let i = 0, j = 0;

				for ( let ix = 0; ix < AMOUNTX; ix ++ ) {

					for ( let iy = 0; iy < AMOUNTY; iy ++ ) {

						positions[ i + 1 ] = ( Math.sin( ( ix + count ) * 0.3 ) * 50 ) +
										( Math.sin( ( iy + count ) * 0.5 ) * 50 );

						scales[ j ] = ( Math.sin( ( ix + count ) * 0.3 ) + 1 ) * 20 +
										( Math.sin( ( iy + count ) * 0.5 ) + 1 ) * 20;

						i += 3;
						j ++;

					}

				}

				particles.geometry.attributes.position.needsUpdate = true;
				particles.geometry.attributes.scale.needsUpdate = true;

				renderer.render( scene, camera );

				count += 0.1;

			}

        </script>

    </div>
  <div class="wrapper"><a class="site-title" rel="author" href="/">Harlinn</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Cpp/Cpp.html">C++</a><a class="page-link" href="/Databases/Databases.html">Databases</a><a class="page-link" href="/DotNet/DotNet.html">.Net</a><a class="page-link" href="/Java/Java.html">Java</a><a class="page-link" href="/Julia/Julia.html">Julia</a><a class="page-link" href="/Python/Python.html">Python</a><a class="page-link" href="/R/R.html">R</a><a class="page-link" href="/Rust/Rust.html">Rust</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">PBRTO a micro optimized raytracing app</h1>
  </header>

  <div class="post-content">
    <p>PBRTO is a micro optimized version of <a href="https://github.com/mmp/pbrt-v4">PBRT-v4</a>, under development 
as an example of how the functionality in <code class="language-plaintext highlighter-rouge">HCCMath.h</code>, <code class="language-plaintext highlighter-rouge">HCCSIMD.h</code> and <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code> can be used to 
optimize the performance of real, computationally intensive, apps. It’s now about <code class="language-plaintext highlighter-rouge">35</code> % 
faster than the release build of the original PBRT.</p>

<p>PBRT is a well written piece of software, with a code base that is, 
for such a complex undertaking, easy to understand and modify. Analyzing the 
performance of the original code is both instructive and interesting, as 
many of pbrts’ mathematical functions perform very well.</p>

<p>Most of the solution is contained within the <a href="https://github.com/Harlinn/Harlinn.Windows/tree/master/Examples/Core/Math/Harlinn.pbrto">Harlinn.pbrto</a>
project. This project builds PBRT at a dynamic link library, which makes it easy to create benchmarks
for the original PBRT code,</p>

<p>Harlinn.pbrto can be built with, or without, the functionality from <code class="language-plaintext highlighter-rouge">HCCMath.h</code>, <code class="language-plaintext highlighter-rouge">HCCSIMD.h</code> and <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code>. 
To build without, make sure <code class="language-plaintext highlighter-rouge">PBRT_USES_HCCMATH</code> is <b>not</b> defined in <code class="language-plaintext highlighter-rouge">pbrtodef.h</code>. At this stage
it may not always build with the functionality from <code class="language-plaintext highlighter-rouge">HCCMath.h</code>, <code class="language-plaintext highlighter-rouge">HCCSIMD.h</code> and <code class="language-plaintext highlighter-rouge">HCCVectorMath.h</code>.</p>

<p>PBRT has its own set of optimized mathematical functions, and it’s only when we 
start comparing the vector and matrix operations, that it becomes clear that
some significant performance improvements are possible.</p>

<p>Matrix addition for a 4x4 matrix can be improved by <code class="language-plaintext highlighter-rouge">330</code> %, matrix multiplication by
<code class="language-plaintext highlighter-rouge">1000</code> %, calculating the matrix determinant is <code class="language-plaintext highlighter-rouge">450</code> % faster, and calculating the 
matrix inverse can be improved by <code class="language-plaintext highlighter-rouge">690</code> %:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-----------------------------------------------------------------------------------------
Benchmark                                               Time             CPU   Iterations
-----------------------------------------------------------------------------------------
BenchmarkDoubleGenerator                             1.63 ns         1.12 ns    560000000
BenchmarkFloatGenerator                              2.31 ns         1.54 ns    497777778
BenchmarkDoubleIsSameValue                           2.11 ns         1.46 ns    373333333
BenchmarkFloatIsSameValue                            1.74 ns         1.24 ns    514625642
BenchmarkDoubleIsZero                                2.02 ns         1.74 ns    448000000
BenchmarkFloatIsZero                                 2.42 ns         1.92 ns    407272727
BenchmarkDoubleIsNaN                                 1.58 ns         1.28 ns    560000000
BenchmarkDoubleStdIsNaN                              1.47 ns         1.12 ns    448000000
BenchmarkDoublePbrtoIsNaN                            1.66 ns         1.23 ns    560000000
BenchmarkFloatIsNaN                                  1.85 ns         1.34 ns    640000000
BenchmarkFloatStdIsNaN                               1.90 ns         1.34 ns    640000000
BenchmarkFloatPbrtoIsNaN                             1.79 ns         1.49 ns    640000000
BenchmarkDoubleSignum                                2.19 ns         1.50 ns    344615385
BenchmarkDoubleNaiveSignum                           1.96 ns         1.71 ns    448000000
BenchmarkFloatSignum                                 2.40 ns         1.77 ns    344615385
BenchmarkFloatNaiveSignum                            2.25 ns         1.78 ns    448000000
BenchmarkDoubleDeg2Rad                               1.72 ns         1.44 ns    640000000
BenchmarkDoublePbrtRadians                           1.68 ns         1.32 ns    640000000
BenchmarkFloatDeg2Rad                                1.73 ns         1.40 ns    448000000
BenchmarkFloatPbrtRadians                            1.92 ns         1.32 ns    640000000
BenchmarkDoubleRad2Deg                               1.57 ns         1.25 ns   1000000000
BenchmarkDoublePbrtDegrees                           1.67 ns         1.41 ns    497777778
BenchmarkFloatRad2Deg                                1.44 ns         1.19 ns    448000000
BenchmarkFloatPbrtDegrees                            1.92 ns         1.40 ns    560000000
BenchmarkDoubleNextAfter                             6.32 ns         5.58 ns    112000000
BenchmarkDoubleStdNextAfter                          11.9 ns         9.24 ns     89600000
BenchmarkFloatNextAfter                              3.04 ns         2.34 ns    407272727
BenchmarkFloatStdNextAfter                           7.35 ns         5.62 ns    100000000
BenchmarkDoubleInternalSqrt                          36.2 ns         30.1 ns     24888889
BenchmarkDoubleSqrt                                  1.92 ns         1.80 ns    373333333
BenchmarkDoubleStdSqrt                               30.6 ns         26.1 ns     26352941
BenchmarkDoublePbrtSqrt                              29.4 ns         26.9 ns     32000000
BenchmarkFloatInternalSqrt                           3.15 ns         2.44 ns    320000000
BenchmarkFloatSqrt                                   1.84 ns         1.34 ns    407272727
BenchmarkFloatStdSqrt                                2.14 ns         1.48 ns    497777778
BenchmarkFloatPbrtSqrt                               2.15 ns         1.70 ns    497777778
BenchmarkDoubleNextDown                              2.49 ns         1.97 ns    373333333
BenchmarkDoubleStdNextDown                           12.2 ns         9.35 ns    112000000
BenchmarkFloatNextDown                               2.09 ns         1.67 ns    373333333
BenchmarkFloatStdNextDown                            7.18 ns         6.09 ns    100000000
BenchmarkFloatPbrtNextFloatDown                      3.38 ns         2.46 ns    280000000
BenchmarkDoubleNextUp                                2.55 ns         2.11 ns    407272727
BenchmarkDoubleStdNextUp                             13.3 ns         11.4 ns     56000000
BenchmarkFloatNextUp                                 3.20 ns         2.26 ns    373333333
BenchmarkFloatStdNextUp                              7.96 ns         6.42 ns    112000000
BenchmarkFloatPbrtNextFloatUp                        3.16 ns         2.85 ns    263529412
BenchmarkDoubleIsInf                                 1.42 ns         1.25 ns    640000000
BenchmarkDoubleStdIsInf                              1.51 ns         1.26 ns    448000000
BenchmarkFloatIsInf                                  1.78 ns         1.74 ns    448000000
BenchmarkFloatStdIsInf                               1.84 ns         1.48 ns    560000000
BenchmarkFloatPbrtIsInf                              2.03 ns         1.77 ns    344615385
BenchmarkDoubleInternalAbs                           2.02 ns         1.68 ns    344615385
BenchmarkDoubleAbs                                   1.31 ns         1.26 ns    560000000
BenchmarkDoubleStdAbs                                1.34 ns         1.13 ns    497777778
BenchmarkDoublePbrtAbs                               1.45 ns         1.15 ns    896000000
BenchmarkFloatInternalAbs                            2.24 ns         1.86 ns    320000000
BenchmarkFloatAbs                                    1.58 ns         1.44 ns    497777778
BenchmarkFloatStdAbs                                 1.63 ns         1.42 ns    640000000
BenchmarkFloatPbrtAbs                                1.52 ns         1.35 ns    497777778
BenchmarkDoubleSignBit                               1.68 ns         1.26 ns    746666667
BenchmarkDoubleStdSignBit                            3.30 ns         2.19 ns    371674074
BenchmarkFloatSignBit                                2.25 ns         1.66 ns    320000000
BenchmarkFloatStdSignBit                             3.14 ns         2.93 ns    224000000
BenchmarkDoubleFRExp                                 3.21 ns         2.39 ns    248888889
BenchmarkDoubleStdFRExp                              18.5 ns         14.1 ns     49777778
BenchmarkFloatFRExp                                  1.85 ns         1.63 ns    344615385
BenchmarkFloatStdFRExp                               14.8 ns         12.6 ns     49777778
BenchmarkDoubleModF                                  3.45 ns         3.05 ns    250880000
BenchmarkDoubleStdModF                               3.50 ns         3.07 ns    203636364
BenchmarkFloatingPointDoubleModF                     3.07 ns         2.91 ns    263529412
BenchmarkFloatModF                                   2.46 ns         2.20 ns    320000000
BenchmarkFloatingPointFloatModF                      2.48 ns         2.25 ns    298666667
BenchmarkFloatStdModF                                3.88 ns         3.26 ns    186666667
BenchmarkDoubleMin                                   1.51 ns         1.23 ns    560000000
BenchmarkDoubleStdMin                                2.26 ns         2.09 ns    298666667
BenchmarkFloatMin                                    1.72 ns         1.43 ns    448000000
BenchmarkFloatStdMin                                 2.32 ns         2.22 ns    344615385
BenchmarkDoubleMax                                   1.97 ns         1.46 ns    407272727
BenchmarkDoubleStdMax                                1.54 ns         1.43 ns    448000000
BenchmarkFloatMax                                    1.98 ns         1.79 ns    560000000
BenchmarkFloatStdMax                                 1.87 ns         1.67 ns    448000000
BenchmarkDoubleTrunc                                 1.67 ns         1.41 ns    497777778
BenchmarkFloatingPointDoubleTrunc                    1.87 ns         1.73 ns    407272727
BenchmarkDoubleStdTrunc                              4.49 ns         3.77 ns    186666667
BenchmarkFloatTrunc                                  1.80 ns         1.29 ns    640000000
BenchmarkFloatingPointFloatTrunc                     2.84 ns         2.47 ns    373333333
BenchmarkFloatStdTrunc                               1.74 ns         1.43 ns    448000000
BenchmarkDoubleFloor                                 1.85 ns         1.53 ns    560000000
BenchmarkFloatingPointDoubleFloor                    3.76 ns         3.15 ns    213333333
BenchmarkDoubleStdFloor                              1.77 ns         1.23 ns    407272727
BenchmarkFloatFloor                                  1.74 ns         1.65 ns    407272727
BenchmarkFloatingPointFloatFloor                     4.07 ns         3.63 ns    172307692
BenchmarkFloatStdFloor                               1.73 ns         1.40 ns    560000000
BenchmarkDoubleCeil                                  1.63 ns         1.41 ns    497777778
BenchmarkFloatingPointDoubleCeil                     3.47 ns         2.85 ns    235789474
BenchmarkDoubleStdCeil                               1.61 ns         1.26 ns    560000000
BenchmarkFloatCeil                                   1.71 ns         1.55 ns    373333333
BenchmarkFloatingPointFloatCeil                      2.03 ns         1.78 ns    448000000
BenchmarkFloatStdCeil                                2.06 ns         1.79 ns    560000000
BenchmarkDoubleRound                                 1.57 ns         1.32 ns    497777778
BenchmarkFloatingPointDoubleRound                    3.73 ns         3.24 ns    298666667
BenchmarkDoubleStdRound                              8.94 ns         7.34 ns    100000000
BenchmarkFloatRound                                  2.81 ns         2.43 ns    373333333
BenchmarkFloatingPointFloatRound                     3.54 ns         3.30 ns    203636364
BenchmarkFloatStdRound                               2.74 ns         2.39 ns    320000000
BenchmarkDoubleClamp                                 2.40 ns         1.99 ns    298666667
BenchmarkDoubleStdClamp                              1.97 ns         1.61 ns    407272727
BenchmarkFloatClamp                                  1.97 ns         1.77 ns    344615385
BenchmarkFloatStdClamp                               2.33 ns         1.81 ns    448000000
BenchmarkFloatPbrtClamp                              2.09 ns         1.95 ns    344615385
BenchmarkDoubleInternalLerpImpl                      3.49 ns         2.78 ns    235789474
BenchmarkDoubleLerp                                  4.09 ns         3.42 ns    224000000
BenchmarkDoubleStdLerp                               3.25 ns         2.56 ns    213333333
BenchmarkFloatLerp                                   4.15 ns         3.22 ns    203636364
BenchmarkFloatInternalLerpImpl                       2.48 ns         1.99 ns    407272727
BenchmarkFloatStdLerp                                2.65 ns         2.25 ns    298666667
BenchmarkFloatPbrtLerp                               1.86 ns         1.51 ns    560000000
BenchmarkDoubleCopySign                              1.61 ns         1.27 ns    407272727
BenchmarkDoubleStdCopySign                           6.17 ns         5.00 ns    100000000
BenchmarkDoublePbrtCopySign                          6.33 ns         5.62 ns    100000000
BenchmarkFloatCopySign                               1.95 ns         1.43 ns    448000000
BenchmarkFloatStdCopySign                            1.75 ns         1.54 ns    640000000
BenchmarkFloatPbrtCopySign                           1.87 ns         1.42 ns    640000000
BenchmarkDoubleScaleByN                              3.98 ns         3.31 ns    235789474
BenchmarkDoubleStdScaleByN                           10.1 ns         9.00 ns     74666667
BenchmarkFloatScaleByN                               2.15 ns         1.88 ns    373333333
BenchmarkFloatStdScaleByN                            6.54 ns         5.78 ns    100000000
BenchmarkDoubleFMod                                   109 ns         90.0 ns      7466667
BenchmarkDoubleStdFMod                                109 ns          103 ns     11200000
BenchmarkFloatFMod                                   4.96 ns         4.25 ns    161858065
BenchmarkFloatStdFMod                                5.66 ns         4.98 ns    160000000
BenchmarkFloatPbrtFMod                               4.97 ns         4.19 ns    149333333
BenchmarkDoubleInternalExpImpl                       5.19 ns         3.96 ns    165925926
BenchmarkDoubleExp                                   4.29 ns         3.66 ns    200704000
BenchmarkDoubleStdExp                                48.3 ns         39.2 ns     17920000
BenchmarkFloatInternalExpImpl                        4.44 ns         3.52 ns    213333333
BenchmarkFloatExp                                    4.03 ns         3.52 ns    186666667
BenchmarkFloatStdExp                                 6.47 ns         4.74 ns    112000000
BenchmarkFloatPbrtFastExp                            3.15 ns         2.68 ns    280000000
BenchmarkDoubleHypot                                 1.89 ns         1.72 ns    344615385
BenchmarkDoubleStdHypot                              6.79 ns         5.02 ns    112000000
BenchmarkFloatHypot                                  2.11 ns         1.93 ns    373333333
BenchmarkFloatStdHypot                               5.51 ns         4.46 ns    112000000
BenchmarkDoubleHypot3                                3.52 ns         3.01 ns    280000000
BenchmarkDoubleStdHypot3                             4.60 ns         4.02 ns    186666667
BenchmarkFloatHypot3                                 2.28 ns         2.14 ns    298666667
BenchmarkFloatStdHypot3                              8.68 ns         6.56 ns    112000000
BenchmarkDoubleInternalLog                           7.04 ns         5.72 ns    112000000
BenchmarkDoubleLog                                   7.07 ns         6.10 ns     89600000
BenchmarkDoubleStdLog                                31.0 ns         26.5 ns     23578947
BenchmarkFloatInternalLog                            2.82 ns         2.01 ns    248888889
BenchmarkFloatLog                                    3.11 ns         2.37 ns    263529412
BenchmarkFloatStdLog                                 6.08 ns         5.16 ns    100000000
BenchmarkDoubleInternalLog2                          8.25 ns         6.10 ns     89600000
BenchmarkDoubleLog2                                  7.65 ns         6.42 ns    112000000
BenchmarkDoubleStdLog2                               35.0 ns         28.3 ns     29866667
BenchmarkFloatInternalLog2                           2.77 ns         2.14 ns    298666667
BenchmarkFloatLog2                                   2.57 ns         2.25 ns    320000000
BenchmarkFloatStdLog2                                6.20 ns         5.02 ns    112000000
BenchmarkDoubleInternalLog10                         8.22 ns         6.80 ns     89600000
BenchmarkDoubleLog10                                 9.65 ns         7.97 ns    100000000
BenchmarkDoubleStdLog10                              38.0 ns         29.0 ns     28000000
BenchmarkFloatInternalLog10                          3.89 ns         3.23 ns    179200000
BenchmarkFloatLog10                                  3.45 ns         2.89 ns    248888889
BenchmarkFloatStdLog10                               6.22 ns         5.47 ns    100000000
BenchmarkDoubleInternalSin                           10.2 ns         8.16 ns     74666667
BenchmarkDoubleSin                                   8.19 ns         6.10 ns     89600000
BenchmarkDoubleStdSin                                7.50 ns         6.72 ns    100000000
BenchmarkFloatInternalSin                            5.42 ns         4.26 ns    172307692
BenchmarkFloatSin                                    5.87 ns         5.31 ns    100000000
BenchmarkFloatStdSin                                 8.31 ns         6.45 ns     89600000
BenchmarkDoubleInternalCos                           10.6 ns         9.07 ns    110276923
BenchmarkDoubleCos                                   7.83 ns         6.80 ns     89600000
BenchmarkDoubleStdCos                                8.14 ns         6.72 ns    100000000
BenchmarkFloatInternalCos                            5.13 ns         4.26 ns    172307692
BenchmarkFloatCos                                    5.33 ns         4.35 ns    172307692
BenchmarkFloatStdCos                                 7.97 ns         6.80 ns     89600000
BenchmarkDoubleInternalTan                           17.8 ns         14.2 ns     40727273
BenchmarkDoubleTan                                   11.6 ns         8.79 ns     74666667
BenchmarkDoubleStdTan                                12.8 ns         10.2 ns    100000000
BenchmarkFloatInternalTan                            5.69 ns         4.35 ns    154482759
BenchmarkFloatTan                                    5.40 ns         4.62 ns    172307692
BenchmarkFloatStdTan                                 7.87 ns         6.98 ns    112000000
BenchmarkDoubleInternalATan                          7.91 ns         6.42 ns    112000000
BenchmarkDoubleATan                                  8.14 ns         6.09 ns    100000000
BenchmarkDoubleStdATan                               8.62 ns         7.11 ns    112000000
BenchmarkFloatInternalATan                           5.65 ns         4.32 ns    144516129
BenchmarkFloatATan                                   6.38 ns         4.76 ns    144516129
BenchmarkFloatStdATan                                7.34 ns         5.75 ns     89600000
BenchmarkDoubleInternalASin                          8.52 ns         6.56 ns    100000000
BenchmarkDoubleASin                                  8.58 ns         7.50 ns     89600000
BenchmarkDoubleStdASin                               11.0 ns         8.12 ns    100000000
BenchmarkFloatInternalASin                           5.19 ns         4.71 ns    149333333
BenchmarkFloatASin                                   6.03 ns         4.80 ns    165925926
BenchmarkFloatStdASin                                8.91 ns         7.81 ns    112000000
BenchmarkDoubleInternalACos                          6.87 ns         5.72 ns    112000000
BenchmarkDoubleACos                                  6.73 ns         5.47 ns    100000000
BenchmarkDoubleStdACos                               9.50 ns         8.16 ns     74666667
BenchmarkFloatInternalACos                           5.08 ns         4.44 ns    186666667
BenchmarkFloatACos                                   5.29 ns         4.24 ns    165925926
BenchmarkFloatStdACos                                9.76 ns         7.34 ns    100000000
BenchmarkDoubleInternalATan2                         13.1 ns         10.6 ns     56000000
BenchmarkDoubleATan2                                 12.8 ns         11.7 ns     74666667
BenchmarkDoubleStdATan2                              19.1 ns         16.5 ns     40727273
BenchmarkFloatInternalATan2                          9.42 ns         8.51 ns    112000000
BenchmarkFloatATan2                                  8.90 ns         7.53 ns     74666667
BenchmarkFloatStdATan2                               14.8 ns         12.1 ns    112000000
BenchmarkFloatFMA                                    1.74 ns         1.51 ns    640000000
BenchmarkPbrtFloatFMA                                1.67 ns         1.26 ns    497777778
BenchmarkFloatSinXOverX                              5.23 ns         4.62 ns    179200000
BenchmarkPbrtFloatSinXOverX                          7.33 ns         6.28 ns    112000000
BenchmarkFloatExpM1                                  17.0 ns         13.3 ns     44800000
BenchmarkFloatSinc                                   5.33 ns         4.61 ns    165925926
BenchmarkPbrtFloatSinc                               8.74 ns         7.67 ns    112000000
BenchmarkFloatMod                                    5.15 ns         4.76 ns    144516129
BenchmarkPbrtFloatMod                                5.33 ns         4.92 ns    149333333
BenchmarkFloatSmoothStep                             3.45 ns         3.02 ns    263529412
BenchmarkPbrtFloatSmoothStep                         3.23 ns         2.73 ns    320000000
BenchmarkFloatSafeSqrt                               1.96 ns         1.66 ns    497777778
BenchmarkPbrtFloatSafeSqrt                           2.31 ns         1.74 ns    448000000
BenchmarkFloatSqr                                    1.68 ns         1.38 ns    497777778
BenchmarkPbrtFloatSqr                                1.91 ns         1.67 ns    448000000
BenchmarkFloatSafeASin                               8.08 ns         7.11 ns    112000000
BenchmarkPbrtFloatSafeASin                           9.44 ns         8.59 ns    100000000
BenchmarkFloatSafeACos                               5.73 ns         5.16 ns    100000000
BenchmarkPbrtFloatSafeACos                           8.79 ns         6.98 ns    112000000
BenchmarkFloatNextFloatUp                            2.89 ns         2.23 ns    407272727
BenchmarkPbrtFloatNextFloatUp                        3.15 ns         2.57 ns    280000000
BenchmarkFloatNextFloatDown                          2.09 ns         1.81 ns    560000000
BenchmarkPbrtFloatNextFloatDown                      3.05 ns         2.57 ns    280000000
BenchmarkFloatAddRoundUp                             2.30 ns         1.99 ns    298666667
BenchmarkPbrtFloatAddRoundUp                         3.80 ns         3.10 ns    186666667
BenchmarkFloatAddRoundDown                           2.18 ns         1.84 ns    407272727
BenchmarkPbrtFloatAddRoundDown                       3.99 ns         3.08 ns    213333333
BenchmarkFloatSubRoundUp                             2.90 ns         2.55 ns    263529412
BenchmarkPbrtFloatSubRoundUp                         3.91 ns         3.40 ns    179200000
BenchmarkFloatSubRoundDown                           2.80 ns         2.45 ns    344615385
BenchmarkPbrtFloatSubRoundDown                       3.73 ns         2.64 ns    213333333
BenchmarkFloatMulRoundUp                             2.29 ns         2.09 ns    298666667
BenchmarkPbrtFloatMulRoundUp                         4.19 ns         3.52 ns    213333333
BenchmarkFloatMulRoundDown                           2.31 ns         1.95 ns    497777778
BenchmarkPbrtFloatMulRoundDown                       3.77 ns         3.26 ns    248888889
BenchmarkFloatDivRoundUp                             3.33 ns         2.43 ns    263529412
BenchmarkPbrtFloatDivRoundUp                         4.16 ns         3.56 ns    263529412
BenchmarkFloatDivRoundDown                           2.78 ns         2.58 ns    235789474
BenchmarkPbrtFloatDivRoundDown                       4.29 ns         3.49 ns    179200000
BenchmarkFloatSqrtRoundUp                            2.28 ns         2.00 ns    320000000
BenchmarkPbrtFloatSqrtRoundUp                        4.13 ns         3.72 ns    218156522
BenchmarkFloatSqrtRoundDown                          2.19 ns         1.81 ns    344615385
BenchmarkPbrtFloatSqrtRoundDown                      4.08 ns         2.99 ns    203636364
BenchmarkFloatFMARoundUp                             2.62 ns         2.35 ns    298666667
BenchmarkPbrtFloatFMARoundUp                         4.26 ns         3.57 ns    179200000
BenchmarkFloatFMARoundDown                           2.73 ns         2.18 ns    344615385
BenchmarkPbrtFloatFMARoundDown                       4.14 ns         3.05 ns    179200000
BenchmarkFloatFastLog2                               6.88 ns         6.09 ns    100000000
BenchmarkPbrtFloatLog2                               5.69 ns         5.16 ns    100000000
BenchmarkFloatLog2Int                                3.54 ns         3.00 ns    213333333
BenchmarkPbrtFloatLog2Int                            3.24 ns         2.75 ns    278755556
BenchmarkFloatGaussian                               6.15 ns         5.41 ns    144516129
BenchmarkPbrtFloatGaussian                           6.73 ns         5.31 ns    100000000
BenchmarkFloatLogistic                               10.9 ns         8.51 ns    112000000
BenchmarkPbrtFloatLogistic                           12.0 ns         11.1 ns     74666667
BenchmarkFloatDifferenceOfProducts                   2.86 ns         2.09 ns    373333333
BenchmarkPbrtFloatDifferenceOfProducts               2.38 ns         2.25 ns    320000000
BenchmarkFloatSumOfProducts                          2.51 ns         2.20 ns    298666667
BenchmarkPbrtFloatSumOfProducts                      2.96 ns         2.29 ns    280000000
BenchmarkFloatQuadratic                              3.22 ns         2.51 ns    280000000
BenchmarkFloatPbrtQuadratic                          2.82 ns         2.46 ns    298666667
BenchmarkFloatIntervalMultiply                       12.4 ns         10.0 ns     56000000
BenchmarkPbrtFloatIntervalMultiply                   43.7 ns         37.7 ns     19478261
BenchmarkFloatIntervalDivide                         15.5 ns         12.2 ns     89600000
BenchmarkPbrtFloatIntervalDivide                     43.4 ns         35.2 ns     18666667
BenchmarkFloatIntervalScalarMultiply                 6.73 ns         5.16 ns    100000000
BenchmarkPbrtFloatIntervalScalarMultiply             6.83 ns         5.00 ns    100000000
BenchmarkFloatIntervalScalarDivision                 9.45 ns         7.01 ns    149333333
BenchmarkPbrtFloatIntervalScalarDivision             6.93 ns         5.47 ns    100000000
BenchmarkFloatIntervalAddition                       5.14 ns         4.50 ns    149333333
BenchmarkPbrtFloatIntervalAddition                   5.58 ns         4.63 ns    138416552
BenchmarkFloatIntervalSubtraction                    4.62 ns         3.29 ns    194782609
BenchmarkPbrtFloatIntervalSubtraction                6.22 ns         5.71 ns    172307692
BenchmarkFloatIntervalScalarAddition                 5.44 ns         4.66 ns    154387692
BenchmarkPbrtFloatIntervalScalarAddition             7.16 ns         5.00 ns    100000000
BenchmarkFloatIntervalScalarSubtraction              4.90 ns         4.52 ns    165925926
BenchmarkPbrtFloatIntervalScalarSubtraction          6.92 ns         5.42 ns    123891359
BenchmarkFloatIntervalSqrt                           4.13 ns         3.43 ns    186666667
BenchmarkPbrtFloatIntervalSqrt                       7.89 ns         6.80 ns     89600000
BenchmarkFloatIntervalFMA                            14.0 ns         9.77 ns     64000000
BenchmarkPbrtFloatIntervalFMA                        44.6 ns         36.3 ns     17230769
BenchmarkFloatIntervalDifferenceOfProducts           23.1 ns         17.1 ns     44800000
BenchmarkPbrtFloatIntervalDifferenceOfProducts       85.7 ns         70.3 ns     10000000
BenchmarkFloatIntervalSumOfProducts                  21.8 ns         17.3 ns     40727273
BenchmarkPbrtFloatIntervalSumOfProducts              83.3 ns         65.6 ns     11200000
BenchmarkFloatIntervalQuadratic                      28.1 ns         22.6 ns     24888889
BenchmarkPbrtFloatIntervalQuadratic                  89.5 ns         67.2 ns     10000000
BenchmarkFloatIntervalACos                           13.0 ns         10.7 ns     74666667
BenchmarkPbrtFloatIntervalACos                       21.3 ns         17.4 ns     44800000
BenchmarkFloatIntervalCos                            17.6 ns         15.3 ns     40727273
BenchmarkPbrtFloatIntervalCos                        21.9 ns         15.0 ns     34461538
BenchmarkFloatIntervalSin                            13.7 ns         13.2 ns     64000000
BenchmarkPbrtFloatIntervalSin                        23.0 ns         22.6 ns     40727273
BenchmarkPbrtSquareMatrix4x4Add                      11.0 ns         8.65 ns    112000000
BenchmarkSquareMatrix4x4Add                          2.83 ns         2.73 ns    263529412
BenchmarkPbrtSquareMatrix3x3Add                      25.0 ns         20.5 ns     32000000
BenchmarkSquareMatrix3x3Add                          3.94 ns         3.45 ns    203636364
BenchmarkSquareMatrix4x4Sub                          2.28 ns         2.01 ns    280000000
BenchmarkSquareMatrix3x3Sub                          3.96 ns         3.35 ns    186666667
BenchmarkPbrtSquareMatrix4x4Transpose                7.90 ns         7.15 ns     89600000
BenchmarkSquareMatrix4x4Transpose                    2.64 ns         2.01 ns    280000000
BenchmarkPbrtSquareMatrix3x3Transpose                8.92 ns         7.67 ns    112000000
BenchmarkSquareMatrix3x3Transpose                    3.91 ns         3.29 ns    280000000
BenchmarkPbrtSquareMatrix4x4ScalarMultiply           4.06 ns         3.52 ns    248888889
BenchmarkSquareMatrix4x4ScalarMultiply               2.07 ns         1.66 ns    320000000
BenchmarkPbrtSquareMatrix4x4Multiply                 32.6 ns         28.5 ns     28000000
BenchmarkSquareMatrix4x4Multiply                     5.20 ns         3.81 ns    160000000
BenchmarkPbrtSquareMatrix3x3Multiply                 20.8 ns         19.9 ns     40727273
BenchmarkSquareMatrix3x3Multiply                     6.19 ns         4.88 ns    112000000
BenchmarkPbrtSquareMatrix4x4Determinant              12.9 ns         11.2 ns     66901333
BenchmarkXMMatrix4x4Determinant                      3.15 ns         2.65 ns    224000000
BenchmarkSquareMatrix4x4Determinant                  3.41 ns         2.86 ns    224000000
BenchmarkPbrtSquareMatrix3x3Determinant              3.65 ns         3.08 ns    248888889
BenchmarkSquareMatrix3x3Determinant                  3.71 ns         3.07 ns    203636364
BenchmarkPbrtSquareMatrix4x4Inverse                   138 ns          105 ns      7466667
BenchmarkXMMatrix4x4Inverse                          15.5 ns         12.6 ns     74666667
BenchmarkSquareMatrix4x4Inverse                      16.4 ns         13.5 ns     49777778
BenchmarkVector2MultipleAdds                         4.43 ns         3.08 ns    213333333
BenchmarkVector2MultipleXMVectorAdd                  4.58 ns         3.54 ns    154482759
BenchmarkVector2MultipleOperations                   4.62 ns         4.27 ns    248888889
BenchmarkPBRTVector2fMultipleOperations              6.36 ns         5.31 ns    100000000
BenchmarkMathFMA1                                    2.03 ns         1.70 ns    497777778
BenchmarkPbrtFMA1                                    2.19 ns         1.78 ns    298666667
BenchmarkMathFMA2                                    3.54 ns         2.78 ns    213333333
BenchmarkPbrtFMA2                                    3.02 ns         2.30 ns    224000000
BenchmarkMathFMA3                                    4.08 ns         3.18 ns    186666667
BenchmarkPbrtFMA3                                    3.58 ns         3.08 ns    213333333
BenchmarkMathQuaternionAdd                           4.01 ns         3.42 ns    224000000
BenchmarkPbrtQuaternionAdd                           4.39 ns         3.29 ns    194782609
BenchmarkMathPoint3Distance                          4.07 ns         3.21 ns    194782609
BenchmarkPbrtPoint3Distance                          3.87 ns         3.40 ns    298666667
BenchmarkMathPoint3DistanceSquared                   3.65 ns         3.26 ns    186666667
BenchmarkPbrtPoint3DistanceSquared                   3.47 ns         2.86 ns    224000000
BenchmarkMathVector3Cross                            3.10 ns         2.62 ns    280000000
BenchmarkMathPbrtVector3Cross                        2.89 ns         2.44 ns    320000000
BenchmarkMathVector4Cross                            2.65 ns         2.23 ns    280000000
BenchmarkMathVector3Dot                              3.12 ns         2.64 ns    248888889
BenchmarkPbrtVector3Dot                              3.08 ns         2.65 ns    235789474
BenchmarkMathVector3AngleBetween                     7.41 ns         5.72 ns    112000000
BenchmarkPbrtVector3AngleBetween                     7.21 ns         6.14 ns    112000000
BenchmarkXMVector3AngleBetweenVectors                11.6 ns         10.0 ns     74666667
BenchmarkMathVector3LengthSquared                    2.66 ns         2.25 ns    320000000
BenchmarkPbrtVector3LengthSquared                    2.30 ns         1.90 ns    344615385
BenchmarkMathVector3Length                           2.99 ns         2.35 ns    298666667
BenchmarkPbrtVector3Length                           3.30 ns         3.08 ns    213333333
BenchmarkMathVector3Ceil                             2.43 ns         1.97 ns    373333333
BenchmarkPbrtVector3Ceil                             3.46 ns         2.65 ns    224000000
BenchmarkMathVector3Floor                            2.61 ns         2.04 ns    344615385
BenchmarkPbrtVector3Floor                            2.75 ns         2.39 ns    235789474
BenchmarkMathVector3Trunc                            2.34 ns         2.10 ns    320000000
BenchmarkMathVector3Round                            2.52 ns         1.96 ns    407272727
BenchmarkMathVector3Lerp                             4.47 ns         2.89 ns    194782609
BenchmarkPbrtVector3Lerp                             3.79 ns         3.45 ns    203636364
BenchmarkMathVector3Clamp                            3.70 ns         3.08 ns    248888889
BenchmarkMathVector3Sqrt                             2.52 ns         1.86 ns    320000000
BenchmarkMathVector3Sin                              10.4 ns         8.79 ns     64000000
BenchmarkMathVector3Cos                              11.2 ns         10.3 ns     64000000
BenchmarkMathVector3Tan                              10.9 ns         9.49 ns    112000000
BenchmarkMathVector3ASin                             7.62 ns         6.98 ns     89600000
BenchmarkMathVector3ACos                             11.3 ns         10.0 ns     74666667
BenchmarkMathVector3ATan                             8.61 ns         7.67 ns    112000000
BenchmarkMathVector3ATan2                            18.6 ns         14.6 ns     44800000
BenchmarkMathVector3SinH                             14.2 ns         12.0 ns     56000000
BenchmarkMathVector3CosH                             13.1 ns         11.7 ns     56000000
BenchmarkMathVector3TanH                             13.2 ns         10.9 ns     56000000
</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Harlinn</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Harlinn</li><li><a class="u-email" href="mailto:espen@harlinn.no">espen@harlinn.no</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/Harlinn"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Harlinn</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is my personal Github site, </p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
